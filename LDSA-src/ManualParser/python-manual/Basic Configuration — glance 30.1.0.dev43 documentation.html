<!DOCTYPE html>
<!-- saved from url=(0071)https://docs.openstack.org/glance/latest/configuration/configuring.html -->
<html lang="en" data-content_root="../"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Basic Configuration — glance 30.1.0.dev43 documentation</title>
    <link rel="stylesheet" type="text/css" href="./Basic Configuration — glance 30.1.0.dev43 documentation_files/pygments.css">
    <link rel="stylesheet" type="text/css" href="./Basic Configuration — glance 30.1.0.dev43 documentation_files/basic.css">
    <script src="./Basic Configuration — glance 30.1.0.dev43 documentation_files/embed.min.js.下载"></script><script async="" src="./Basic Configuration — glance 30.1.0.dev43 documentation_files/analytics.js.下载"></script><script src="./Basic Configuration — glance 30.1.0.dev43 documentation_files/documentation_options.js.下载"></script>
    <script src="./Basic Configuration — glance 30.1.0.dev43 documentation_files/doctools.js.下载"></script>
    <script src="./Basic Configuration — glance 30.1.0.dev43 documentation_files/sphinx_highlight.js.下载"></script>
    <link rel="index" title="Index" href="https://docs.openstack.org/glance/latest/genindex.html">
    <link rel="search" title="Search" href="https://docs.openstack.org/glance/latest/search.html">
    <link rel="next" title="glance-api.conf" href="https://docs.openstack.org/glance/latest/configuration/glance_api.html">
    <link rel="prev" title="Glance Configuration Options" href="https://docs.openstack.org/glance/latest/configuration/index.html">
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- Bootstrap CSS -->
<link href="./Basic Configuration — glance 30.1.0.dev43 documentation_files/bootstrap.min.css" rel="stylesheet">

<!-- Fonts -->
<link href="./Basic Configuration — glance 30.1.0.dev43 documentation_files/font-awesome.min.css" rel="stylesheet">

<!-- Custom CSS -->
<link href="./Basic Configuration — glance 30.1.0.dev43 documentation_files/combined.css" rel="stylesheet">

<!-- Search CSS -->
<link href="./Basic Configuration — glance 30.1.0.dev43 documentation_files/search.css" rel="stylesheet">

<!-- Pygments CSS -->
<link href="./Basic Configuration — glance 30.1.0.dev43 documentation_files/pygments(1).css" rel="stylesheet">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-17511903-1', 'auto');
ga('send', 'pageview');
</script>
<!-- End Google Analytics -->


  <style type="text/css">
.ossw-search-bar-wrapper {
	position: relative;
}

#search-bar-input {
	width: 100%;
	border: 2px solid #dae5ee;
	border-radius: 4px;
	height: 37px;
	padding: 0 0 0 10px;
	background: #fff;
	color: #30739C;
	font-size: 12px;
	text-transform: lowercase;
	font-weight: 400;
}

#search-bar-input::placeholder {
	color: #C7CAE0;
}

#search-bar-input:focus {
	border-color: #30739C;
	outline: none;
}

.ossw-search-bar-close {
	cursor:	pointer;
	position: absolute;
	top: 10px;
	right: 15px;
	color: #dae5ee;
	z-index: 1001;
	font-size: 16px;
}

.ossw-search-bar-close:hover {
	color: #30739C;
}

.ossw-no-results {
	font-size: 12px;
	font-weight: 500;
	line-height: 1;
	color: #8B9BAD;
}

.ossw-search-suggestions-wrapper {
	display: none;
}

.ossw-search-suggestions {
	border: 1px solid #DDDDDD;
	padding: 5px;
	position: relative;
	top: 10px;
	z-index: 9999;
	background: white;
	width: 100%;
}

.ossw-result-item {
	padding:10px 5px;
	display:block;
	position:relative;
	cursor:pointer;
	border-bottom:1px solid #E9EDF2;
	text-align:left;
	text-decoration:none
}

.ossw-result-item:before{
	right:22px;
	top:50%;
	margin-top:-3px;
	width:6px;
	height:6px;
	border-style:solid;
	border-width:1px 1px 0 0;
	border-color:#C5D1DE;
	-webkit-transform:rotate(45deg);
	-moz-transform:rotate(45deg);
	-ms-transform:rotate(45deg);
	transform:rotate(45deg);
	display:block;
	position:absolute;
	content:""
}

.ossw-result-item:after{
	display:table;
	content:"";
	width:0;
	height:0;
	clear:both
}

.ossw-result-item:hover {
	background-color: rgba(0,0,0,0.05);
}
.ossw-result-item:hover:before {
	border-color:#8B9BAD
}
.ossw-result-item:hover .ossw-result-detail {
	color:#3B454F
}

.ossw-result-item em{
	font-style:normal;
	-webkit-box-shadow:inset 0 -1px 0 rgba(0,0,0,0.1);
	-moz-box-shadow:inset 0 -1px 0 rgba(0,0,0,0.1);
	box-shadow:inset 0 -1px 0 rgba(0,0,0,0.1);
	font-weight: bold;
	background-color: #f6fcfe;
}

.ossw-result-heading {
	width: 90%;
	font-weight:500;
	font-size:13px;
	line-height:1.2;
	margin-bottom:4px;
	color:#258BF8;
	white-space:nowrap;
	overflow:hidden;
	-ms-text-overflow:ellipsis;
	text-overflow:ellipsis;
}


.ossw-result-detail {
	width: 90%;
	max-height:31px;
	overflow:hidden;
	font-size:12px;
	font-weight:400;
	line-height:1.4;
	color:#8B9BAD
}

.ossw-search-results {
	display: none;
}

.ossw-search-results .ossw-overlay {
	position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5);z-index:99999991
}

.ossw-search-results .ossw-overlay.ossw-dismiss {
	display:none
}

.ossw-search-results .ossw-overlay.ossw-dismiss .ossw-container {
	opacity:0;
	-webkit-animation:st-ui-fade-out ease-in-out 0.5s;
	-moz-animation:st-ui-fade-out ease-in-out 0.5s;
	animation:st-ui-fade-out ease-in-out 0.5s
}

.ossw-search-results .ossw-container {
	position: fixed;
	top: 0;
	margin: 64px 0 0 0;
	width: 60%;
	height: 80%;
	max-width: 800px;
	-webkit-box-sizing: border-box;
	-moz-box-sizing: border-box;
	box-sizing: border-box;
	background: #fff;
	z-index: 99999992;
	-webkit-animation: st-ui-fade-in ease-in-out 0.5s;
	-moz-animation: st-ui-fade-in ease-in-out 0.5s;
	animation: st-ui-fade-in ease-in-out 0.5s;
	overflow: hidden;
	-webkit-text-size-adjust: none;
	-ms-text-size-adjust: none;
	text-size-adjust: none;
	-webkit-border-radius: 5px;
	-moz-border-radius: 5px;
	border-radius: 5px;
	font-family: system, -apple-system, BlinkMacSystemFont, "Helvetica Neue", "Lucida Grande", sans-serif;
}

@media (max-width: 660px) {
	.ossw-pagination .ossw-page-link:not(.ossw-active):not(.next) {
		display: none !important;
	}
}

@media only screen and (orientation: portrait) {
	.ossw-search-results .ossw-container {
		height: 60%;
	}
}

.ossw-search-results .ossw-container .ossw-header-wrapper {
	margin: 0;
	padding: 0;
	border: 0;
	-webkit-box-sizing: border-box;
	-moz-box-sizing: border-box;
	box-sizing: border-box;
	-webkit-font-smoothing: antialiased;
	-webkit-text-size-adjust: none;
	-ms-text-size-adjust: none;
	text-size-adjust: none;
	font-family: system, -apple-system, BlinkMacSystemFont, "Helvetica Neue", "Lucida Grande", sans-serif;
}

.ossw-search-results .ossw-container .ossw-header-wrapper .ossw-header {
	position: relative;
	width: 100%;
	height: 49px;
	border-bottom: 1px solid rgba(0,0,0,0.1);
	z-index: 99999997;
	background: #F9FAFB;
	-moz-background-clip: padding-box;
	background-clip: padding-box;
	-webkit-backface-visibility: hidden;
	-moz-backface-visibility: hidden;
	backface-visibility: hidden;
	-webkit-border-radius: 5px 5px 0 0;
	-moz-border-radius: 5px 5px 0 0;
	border-radius: 5px 5px 0 0;
}

.ossw-search-results .ossw-container .ossw-header-wrapper .ossw-header input{
	padding: 0 120px 0 36px;
	width: 100%;
	height: 48px;
	background: transparent;
	border: 0;
	outline: none;
	color: #3B454F;
	font-size: 15px;
	font-weight: 500;
	line-height: 19px;
	-webkit-border-radius: 5px 5px 0 0;
	-moz-border-radius: 5px 5px 0 0;
	border-radius: 5px 5px 0 0;
	font-family: system, -apple-system, BlinkMacSystemFont, "Helvetica Neue", "Lucida Grande", sans-serif;
}

.ossw-search-results .ossw-container .ossw-header-wrapper .ossw-header input:focus{
	height:50px;border-bottom:2px solid #33AAFF
}

.ossw-search-results .ossw-container .ossw-header-wrapper .ossw-header .ossw-search-icon {
	display: block;
	position: absolute;
	top: 18px;
	left: 15px;
	width: 13px;
	height: 13px;
	pointer-events: none;
}

.ossw-search-results .ossw-container .ossw-header-wrapper .ossw-header .ossw-search-icon .fa {
	opacity: 0.6;
}

.ossw-search-results .ossw-container .ossw-header-wrapper .ossw-header .ossw-close-icon {
	display: block;
	position: absolute;
	top: 16px;
	right: 14px;
	width: 16px;
	height: 16px;
	cursor: pointer;
}

.ossw-search-results .ossw-container .ossw-header-wrapper .ossw-header .ossw-close-icon .fa {
	opacity: 0.6;
}

.ossw-search-results .ossw-container .ossw-header-wrapper .ossw-header .ossw-close-icon .fa:hover {
	opacity: 1;
}

.ossw-search-results .ossw-suggestions-wrapper {
	position: absolute;
	top: 0;
	left: 0;
	margin: 0;
	padding: 68px 10px;
	width: 50%;
	height: 100%;
	z-index: 99999995;
	background: #fff;
	-webkit-box-sizing: border-box;
	-moz-box-sizing: border-box;
	box-sizing: border-box;
	border: 0;
	-webkit-animation: st-ui-slide-in ease-in-out 0.5s;
	-moz-animation: st-ui-slide-in ease-in-out 0.5s;
	animation: st-ui-slide-in ease-in-out 0.5s;
	-webkit-box-shadow: 1px 0 3px rgba(0,0,0,0.2);
	-moz-box-shadow: 1px 0 3px rgba(0,0,0,0.2);
	box-shadow: 1px 0 3px rgba(0,0,0,0.2);
	-webkit-border-radius: 5px;
	-moz-border-radius: 5px;
	border-radius: 5px;
}

.ossw-search-results .ossw-suggestions-wrapper .ossw-heading {
	margin-bottom: 0;
	padding: 6px 18px 14px 0;
	border-bottom: 1px solid #E9EDF2;
	color: rgba(0,0,0,0.4);
}

.ossw-search-results .ossw-results-wrapper {
	position: absolute;
	top: 0;
	left: 0;
	padding: 50px 0px;
	width: 100%;
	height: 100%;
	overflow: auto;
	-webkit-overflow-scrolling: touch;
	-webkit-border-radius: 5px;
	-moz-border-radius: 5px;
	border-radius: 5px;
}

.ossw-search-results .ossw-results-wrapper .ossw-results {
	padding: 0 10px 50px 10px;
}

.ossw-search-results .ossw-footer-wrapper .ossw-footer {
	position: absolute;
	bottom: 0;
	left: 0;
	width: 100%;
	height: 49px;
	border-top: 1px solid rgba(0,0,0,0.1);
	background: #F9FAFB;
	z-index: 99999996;
	-moz-background-clip: padding-box;
	background-clip: padding-box;
	-webkit-backface-visibility: hidden;
	-moz-backface-visibility: hidden;
	backface-visibility: hidden;
	-webkit-border-radius: 0 0 5px 5px;
	-moz-border-radius: 0 0 5px 5px;
	border-radius: 0 0 5px 5px;
}

.ossw-search-results .ossw-footer-wrapper .ossw-footer .ossw-summary {
	display: block;
	position: absolute;
	width: 65%;
	top: 18px;
	left: 16px;
	float: left;
	font-size: 12px;
	font-weight: 500;
	line-height: 1;
	color: #8B9BAD;
}

.ossw-search-results .ossw-footer-wrapper .ossw-footer .ossw-pagination {
	display: block;
	padding-right: 9px;
	float: right;
	text-align: right;
	font-size: 12px;
	font-weight: 500;
	color: #8B9BAD;
	line-height: 1;
}

.ossw-search-results .ossw-footer-wrapper .ossw-footer .ossw-pagination .ossw-page-link {
	display: inline-block;
	padding: 18px 7px;
	text-decoration: none;
	color: #258BF8;
	text-transform: uppercase;
}

.ossw-search-results .ossw-footer-wrapper .ossw-footer .ossw-pagination .ossw-page-link.ossw-active {
	color: #8B9BAD;
}

.ossw-search-results .ossw-footer-wrapper .ossw-footer .ossw-pagination .ossw-page-link .ossw-right-arrow {
	display: inline-block;
	position: relative;
	width: 6px;
	height: 6px;
	margin: 0 0 0 2px;
}
</style></head><body>

<!-- SOURCE_FILE: https://opendev.org/openstack/glance/src/doc/source/configuration/configuring.rst -->

<script>
    (function (window, document) {
        var loader = function () {
            var script = document.createElement("script"), tag = document.getElementsByTagName("script")[0];
            script.src = "https://search.openstack.org/widget/embed.min.js?t="+Date.now();
            tag.parentNode.insertBefore(script, tag);
        };
        window.addEventListener ? window.addEventListener("load", loader, false) : window.attachEvent("onload", loader);
    })(window, document);
</script>

<nav class="navbar navbar-default navbar-expand-md" role="navigation">
  <div class="container">
    <!-- Brand and toggle get grouped for better mobile display -->
      <div class="brand-wrapper">
        <a class="navbar-brand" href="https://www.openstack.org/">
        <img src="./Basic Configuration — glance 30.1.0.dev43 documentation_files/logo-full.svg" width="135px" height="35px">
        </a>
      </div>
      <button class="navbar-toggler" data-bs-target="#navbar-main-1" aria-controls="navbar-main-1" data-bs-toggle="collapse" type="button">
        <span class="navbar-toggler-icon"></span>
        <span class="sr-only">Toggle navigation</span>
      </button>
      <div class="search-icon show"><i class="fa fa-search"></i> Search</div>
      <div class="collapse navbar-collapse" id="navbar-main-1">
<div class="search-container tiny">
    <div class="openstack-search-bar" data-baseurl="search.openstack.org" data-context="docs-openstack"><div class="ossw-search-wrapper"><div class="ossw-search-bar-wrapper"><input type="text" id="search-bar-input" placeholder="Search OpenStack" value=""> <i class="fa fa-times ossw-search-bar-close"></i></div> <div class="ossw-search-suggestions-wrapper"></div> <div class="ossw-search-results"><div class="ossw-overlay"></div> <div class="ossw-container"> <div class="ossw-header-wrapper"><section class="ossw-header"><input type="text" placeholder="Search OpenStack" id="search-popup-input" value=""> <span class="ossw-search-icon"><i class="fa fa-search"></i></span> <a class="ossw-close-icon"><i class="fa fa-times"></i></a></section></div> <div><section style="display: none;" class="ossw-suggestions-wrapper"><div class="ossw-heading">suggested results</div> <div class="ossw-suggestions"></div></section> <section class="ossw-results-wrapper"><div style="display: block;" class="ossw-results"></div></section></div> <div class="ossw-footer-wrapper"><section class="ossw-footer"><span class="ossw-summary"><div>No results found for “”</div></span></section></div></div></div></div></div>
</div>
      <ul class="nav navbar-nav navbar-main ms-auto mb-2 mb-lg-0 justify-content-end show" role="navigation">
<li class="search-container-mobile">
    <div class="openstack-search-bar" data-baseurl="search.openstack.org" data-context="docs-openstack"><div class="ossw-search-wrapper"><div class="ossw-search-bar-wrapper"><input type="text" id="search-bar-input" placeholder="Search OpenStack" value=""> <i class="fa fa-times ossw-search-bar-close"></i></div> <div class="ossw-search-suggestions-wrapper"></div> <div class="ossw-search-results"><div class="ossw-overlay"></div> <div class="ossw-container"> <div class="ossw-header-wrapper"><section class="ossw-header"><input type="text" placeholder="Search OpenStack" id="search-popup-input" value=""> <span class="ossw-search-icon"><i class="fa fa-search"></i></span> <a class="ossw-close-icon"><i class="fa fa-times"></i></a></section></div> <div><section style="display: none;" class="ossw-suggestions-wrapper"><div class="ossw-heading">suggested results</div> <div class="ossw-suggestions"></div></section> <section class="ossw-results-wrapper"><div style="display: block;" class="ossw-results"></div></section></div> <div class="ossw-footer-wrapper"><section class="ossw-footer"><span class="ossw-summary"><div>No results found for “”</div></span></section></div></div></div></div></div>
</li>
        <li class="nav-item dropdown"> <!--Software -->
          <a href="https://www.openstack.org/software/" class="nav-link dropdown-toggle" aria-expanded="false">Software</a>
          <ul class="dropdown-menu dropdown-hover">
            <li><a class="dropdown-item" href="https://www.openstack.org/software/">Overview</a></li>
            <li><a class="dropdown-item" href="https://www.openstack.org/software/project-navigator/openstack-components">OpenStack Components</a></li>
            <li><a class="dropdown-item" href="https://www.openstack.org/software/project-navigator/sdks">SDKs</a></li>
            <li><a class="dropdown-item" href="https://www.openstack.org/software/project-navigator/deployment-tools">Deployment Tools</a></li>
            <li><a class="dropdown-item" href="https://www.openstack.org/assets/software/projectmap/openstack-map.pdf" target="_blank">OpenStack Map</a></li>
            <li><a class="dropdown-item" href="https://www.openstack.org/software/sample-configs/">Sample Configs</a></li>
          </ul>
        </li>
        <li class="nav-item drop-down"> <!-- Use Cases -->
          <a href="https://www.openstack.org/use-cases/" class="nav-link dropdown-toggle" role="button">Use Cases</a>
          <ul class="dropdown-menu dropdown-hover">
            <li><a class="dropdown-item" href="https://www.openstack.org/use-cases/">Users in Production</a></li>
            <li><hr class="dropdown-divider"></li>
            <li><a class="dropdown-item" href="https://www.openstack.org/use-cases/bare-metal/">Ironic Bare Metal</a></li>
            <li><a class="dropdown-item" href="https://www.openstack.org/use-cases/edge-computing/">Edge Computing</a></li>
            <li><a class="dropdown-item" href="https://www.openstack.org/use-cases/telecoms-and-nfv/">Telecom &amp; NFV</a></li>
            <li><a class="dropdown-item" href="https://www.openstack.org/use-cases/science/">Science and HPC</a></li>
            <li><a class="dropdown-item" href="https://www.openstack.org/use-cases/containers/">Containers</a></li>
            <li><a class="dropdown-item" href="https://www.openstack.org/use-cases/enterprise/">Enterprise</a></li>
            <li><a class="dropdown-item" href="https://www.openstack.org/surveys/landing">User Survey</a></li>
          </ul>
        </li>
        <li class="nav-item dropdown"> <!-- Events -->
          <a href="https://openinfra.dev/summit" class="nav-link dropdown-toggle" role="button" id="dropdownMenuEvents">Events</a>
          <ul class="dropdown-menu dropdown-hover">
            <li><a class="dropdown-item" href="https://openinfra.dev/summit">OpenInfra Summit</a></li>
            <li><a class="dropdown-item" href="https://www.openstack.org/ptg/">Project Teams Gathering</a></li>
            <li><a class="dropdown-item" href="https://www.openstack.org/events/opendev-2020/">OpenDev</a></li>
            <li><a class="dropdown-item" href="https://www.openstack.org/events/community-events/">Community Events</a></li>
            <li><a class="dropdown-item" href="https://www.openstack.org/events/openstackdays">OpenStack &amp; OpenInfra Days</a></li>
            <li><a class="dropdown-item" href="https://www.openstack.org/videos/">Summit Videos</a></li>
          </ul>
        </li>
        <li class="nav-item dropdown"><!-- Community -->
          <a href="https://www.openstack.org/community/" class="nav-link dropdown-toggle" role="button">Community</a>
          <ul class="dropdown-menu dropdown-hover">
            <li><a class="dropdown-item" href="https://www.openstack.org/community/">Welcome! Start Here</a></li>
            <li><a class="dropdown-item" href="https://www.openstack.org/community/tech-committee">OpenStack Technical Committee</a></li>
            <li><a class="dropdown-item" href="https://www.openstack.org/community/speakers/">Speakers Bureau</a></li>
            <li><a class="dropdown-item" href="http://wiki.openstack.org/">OpenStack Wiki</a></li>
            <li><a class="dropdown-item" href="https://www.openstack.org/coa/">Get Certified (COA)</a></li>
            <li><a class="dropdown-item" href="https://www.openstack.org/community/jobs/">Jobs</a></li>
            <li><a class="dropdown-item" href="https://www.openstack.org/marketing/">Marketing Resources</a></li>
            <li><a class="dropdown-item" href="https://www.openstack.org/news/">Community News</a></li>
            <li><a class="dropdown-item" href="http://superuser.openstack.org/">Superuser Magazine</a></li>
            <li><hr class="dropdown-divider"></li>
            <li><a class="dropdown-item" href="https://www.openstack.org/community/supporting-organizations/">OpenInfra Foundation Supporting Organizations</a></li>
            <li><a class="dropdown-item" href="https://openinfra.dev/">OpenInfra Foundation</a></li>
          </ul>
        </li>
        <li class="nav-item dropdown"><!-- Marketplace -->
          <a href="https://www.openstack.org/marketplace/" class="nav-link dropdown-toggle" role="button">Marketplace</a>
          <ul class="dropdown-menu dropdown-hover">
            <li><a class="dropdown-item" href="https://www.openstack.org/marketplace/training/">Training</a></li>
            <li><a class="dropdown-item" href="https://www.openstack.org/marketplace/distros/">Distros &amp; Appliances</a></li>
            <li><a class="dropdown-item" href="https://www.openstack.org/marketplace/public-clouds/">Public Clouds</a></li>
            <li><a class="dropdown-item" href="https://www.openstack.org/marketplace/hosted-private-clouds/">Hosted Private Clouds</a></li>
            <li><a class="dropdown-item" href="https://www.openstack.org/marketplace/remotely-managed-private-clouds/">Remotely Managed Private Clouds</a></li>
            <li><a class="dropdown-item" href="https://www.openstack.org/marketplace/consulting/">Consulting &amp; Integrators</a></li>
            <li><a class="dropdown-item" href="https://www.openstack.org/marketplace/drivers/">Drivers</a></li>
          </ul>
        </li>
        <li class="nav-item"><!-- Blog -->
          <a class="nav-link" href="https://www.openstack.org/blog/">Blog</a>
        </li>
        <li class="nav-item"><!-- Docs -->
          <a class="nav-link" href="http://docs.openstack.org/">Docs</a>
        </li>
        <li class="nav-item dropdown join-nav-section"> <!-- Join -->
          <a href="https://openinfra.dev/join/" class="nav-link dropdown-toggle" role="button">Join</a>
          <ul class="dropdown-menu dropdown-hover" style="display: none;">
            <li><a class="dropdown-item" href="https://openinfra.dev/join/">Sign up for Foundation Membership</a></li>
            <li><a class="dropdown-item" href="https://openinfra.dev/join/">Sponsor the Foundation</a></li>
            <li><a class="dropdown-item" href="https://openinfra.dev/">More about the Foundation</a></li>
          </ul>
        </li>
        <li class="nav-item"> <!-- Login -->
          <a href="https://www.openstack.org/Security/login/?BackURL=/home/" class="sign-in-btn">Log In</a>
        </li>
      </ul>
    </div>
  </div>
  <!-- /.container -->
</nav>

    <div class="container docs-book-wrapper">
      <div class="row">
        <div class="col-lg-9 col-md-8 col-sm-8 col-lg-push-3 col-md-push-4 col-sm-push-4 order-4">
<div class="row docs-title">
  <div class="col-lg-8">
      <h1>Basic Configuration</h1>
    
  </div>
  <div class="docs-actions">
    
    <a href="https://docs.openstack.org/glance/latest/configuration/index.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: Glance Configuration Options"></i></a>
    
    
    <a href="https://docs.openstack.org/glance/latest/configuration/glance_api.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: glance-api.conf"></i></a>
    
    <a id="logABugLink1" href="https://bugs.launchpad.net/glance/+filebug?field.title=Basic%20Configuration%20in%20glance&amp;field.tags=documentation&amp;field.comment=%0A%0A%0AThis%20bug%20tracker%20is%20for%20errors%20with%20the%20documentation,%20use%20the%20following%20as%20a%20template%20and%20remove%20or%20add%20fields%20as%20you%20see%20fit.%20Convert%20[%20]%20into%20[x]%20to%20check%20boxes:%0A%0A-%20[%20]%20This%20doc%20is%20inaccurate%20in%20this%20way:%20______%0A-%20[%20]%20This%20is%20a%20doc%20addition%20request.%0A-%20[%20]%20I%20have%20a%20fix%20to%20the%20document%20that%20I%20can%20paste%20below%20including%20example:%20input%20and%20output.%20%0A%0AIf%20you%20have%20a%20troubleshooting%20or%20support%20issue,%20use%20the%20following%20%20resources:%0A%0A%20-%20The%20mailing%20list:%20https://lists.openstack.org%0A%20-%20IRC:%20%27openstack%27%20channel%20on%20OFTC%0A%0A-----------------------------------%0ARelease:%2030.1.0.dev43%20on%202025-03-27%2012:35:35%0ASHA:%20d0d8e8f57955d08836400c83445552b0d61f50ad%0ASource:%20https://opendev.org/openstack/glance/src/doc/source/configuration/configuring.rst%0AURL:%20https://docs.openstack.org/glance/latest/configuration/configuring.html" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
    
  </div>
</div>
          <div class="row">
            <div class="col-lg-12">
              <div class="docs-body" role="main">

  <section id="basic-configuration">
<span id="id1"></span><h1>Basic Configuration<a class="headerlink" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#basic-configuration" title="Link to this heading">¶</a></h1>
<p>Glance has a number of options that you can use to configure the Glance API
server and the various storage backends that Glance can use to store images.</p>
<p>Most configuration is done via configuration files.</p>
<p>When starting up a Glance server, you can specify the configuration file to
use (see <a class="reference internal" href="https://docs.openstack.org/glance/latest/admin/controllingservers.html#controlling-servers"><span class="std std-ref">the documentation on controller Glance servers</span></a>). If you do <strong>not</strong> specify a configuration file,
Glance will look in the following directories for a configuration file,
in order:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">~/.glance</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">~/</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/etc/glance</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/etc</span></code></p></li>
</ul>
<p>The Glance API server configuration file should be named <code class="docutils literal notranslate"><span class="pre">glance-api.conf</span></code>.
There are many other configuration files also since Glance maintains a
configuration file for each of its services. If you installed Glance via your
operating system’s package management system, it is likely that you will have
sample configuration files installed in <code class="docutils literal notranslate"><span class="pre">/etc/glance</span></code>.</p>
<p>In addition, sample configuration files for each server application with
detailed comments are available in the <a class="reference internal" href="https://docs.openstack.org/glance/latest/configuration/sample-configuration.html#sample-configuration"><span class="std std-ref">Glance Sample Configuration</span></a> section.</p>
<p>The PasteDeploy configuration (controlling the deployment of the WSGI
application for each component) may be found by default in
&lt;component&gt;-paste.ini alongside the main configuration file, &lt;component&gt;.conf.
For example, <code class="docutils literal notranslate"><span class="pre">glance-api-paste.ini</span></code> corresponds to <code class="docutils literal notranslate"><span class="pre">glance-api.conf</span></code>.
This pathname for the paste config is configurable, as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">paste_deploy</span><span class="p">]</span>
<span class="n">config_file</span> <span class="o">=</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">paste</span><span class="o">/</span><span class="n">config</span>
</pre></div>
</div>
<section id="common-configuration-options-in-glance">
<h2>Common Configuration Options in Glance<a class="headerlink" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#common-configuration-options-in-glance" title="Link to this heading">¶</a></h2>
<p>Glance has a few command-line options that are common to all Glance programs:</p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">--verbose</span></code></dt><dd><p>Optional. Default: <code class="docutils literal notranslate"><span class="pre">False</span></code></p>
<p>Can be specified on the command line and in configuration files.</p>
<p>Turns on the INFO level in logging and prints more verbose command-line
interface printouts.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">--debug</span></code></dt><dd><p>Optional. Default: <code class="docutils literal notranslate"><span class="pre">False</span></code></p>
<p>Can be specified on the command line and in configuration files.</p>
<p>Turns on the DEBUG level in logging.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">--config-file=PATH</span></code></dt><dd><p>Optional. Default: See below for default search order.</p>
<p>Specified on the command line only.</p>
<p>Takes a path to a configuration file to use when running the program. If this
CLI option is not specified, then we check to see if the first argument is a
file. If it is, then we try to use that as the configuration file.
If there is no file or there were no arguments, we search for a configuration
file in the following order:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">~/.glance</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">~/</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/etc/glance</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/etc</span></code></p></li>
</ul>
<p>The filename that is searched for depends on the server application name. So,
if you are starting up the API server, <code class="docutils literal notranslate"><span class="pre">glance-api.conf</span></code> is searched for.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">--config-dir=DIR</span></code></dt><dd><p>Optional. Default: <code class="docutils literal notranslate"><span class="pre">None</span></code></p>
<p>Specified on the command line only.</p>
<p>Takes a path to a configuration directory from which all *.conf fragments
are loaded. This provides an alternative to multiple <code class="docutils literal notranslate"><span class="pre">--config-file</span></code>
options when it is inconvenient to explicitly enumerate all the
configuration files, for example when an unknown number of config fragments
are being generated by a deployment framework.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">--config-dir</span></code> is set, then <code class="docutils literal notranslate"><span class="pre">--config-file</span></code> is ignored.</p>
<p>An example usage would be:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ glance-api --config-dir=/etc/glance/glance-api.d

$ ls /etc/glance/glance-api.d
  00-core.conf
  01-swift.conf
  02-ssl.conf
  ... etc.
</pre></div>
</div>
<p>The numeric prefixes in the example above are only necessary if a specific
parse ordering is required (i.e. if an individual config option set in an
earlier fragment is overridden in a later fragment).</p>
<p>Note that <code class="docutils literal notranslate"><span class="pre">glance-manage</span></code> currently loads configuration from three files:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">glance-api.conf</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">glance-manage.conf</span></code></p></li>
</ul>
<p>By default <code class="docutils literal notranslate"><span class="pre">glance-manage.conf</span></code> only specifies a custom logging file but
other configuration options for <code class="docutils literal notranslate"><span class="pre">glance-manage</span></code> should be migrated
in there.
<strong>Warning</strong>: Options set in <code class="docutils literal notranslate"><span class="pre">glance-manage.conf</span></code> will override options of
the same section and name set in <code class="docutils literal notranslate"><span class="pre">glance-api.conf</span></code></p>
</dd>
</dl>
</section>
<section id="configuring-server-startup-options">
<h2>Configuring Server Startup Options<a class="headerlink" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#configuring-server-startup-options" title="Link to this heading">¶</a></h2>
<p>You can put the following options in the <code class="docutils literal notranslate"><span class="pre">glance-api.conf</span></code> file, under
the <code class="docutils literal notranslate"><span class="pre">[DEFAULT]</span></code> section. They enable startup and binding behaviour for
the API servers, respectively.</p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">bind_host=ADDRESS</span></code></dt><dd><p>The address of the host to bind to.</p>
<p>Optional. Default: <code class="docutils literal notranslate"><span class="pre">0.0.0.0</span></code></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">bind_port=PORT</span></code></dt><dd><p>The port the server should bind to.</p>
<p>Optional. Default: <code class="docutils literal notranslate"><span class="pre">9292</span></code> for the API server</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">backlog=REQUESTS</span></code></dt><dd><p>Number of backlog requests to configure the socket with.</p>
<p>Optional. Default: <code class="docutils literal notranslate"><span class="pre">4096</span></code></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tcp_keepidle=SECONDS</span></code></dt><dd><p>Sets the value of TCP_KEEPIDLE in seconds for each server socket.
Not supported on OS X.</p>
<p>Optional. Default: <code class="docutils literal notranslate"><span class="pre">600</span></code></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">client_socket_timeout=SECONDS</span></code></dt><dd><p>Timeout for client connections’ socket operations.  If an incoming
connection is idle for this period it will be closed.  A value of <cite>0</cite>
means wait forever.</p>
<p>Optional. Default: <code class="docutils literal notranslate"><span class="pre">900</span></code></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">workers=PROCESSES</span></code></dt><dd><p>Number of Glance API worker processes to start. Each worker process will
listen on the same port. Increasing this value may increase performance
(especially if using SSL with compression enabled). Typically it is
recommended to have one worker process per CPU. The value <cite>0</cite> will prevent
any new worker processes from being created.</p>
<p>Optional. Default: The number of CPUs available will be used by default.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">max_request_id_length=LENGTH</span></code></dt><dd><p>Limits the maximum size of the x-openstack-request-id header which is
logged. Affects only if context middleware is configured in pipeline.</p>
<p>Optional. Default: <code class="docutils literal notranslate"><span class="pre">64</span></code> (Limited by max_header_line default: 16384)</p>
</dd>
</dl>
</section>
<section id="configuring-logging-in-glance">
<h2>Configuring Logging in Glance<a class="headerlink" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#configuring-logging-in-glance" title="Link to this heading">¶</a></h2>
<p>There are a number of configuration options in Glance that control how Glance
servers log messages.</p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">--log-config=PATH</span></code></dt><dd><p>Optional. Default: <code class="docutils literal notranslate"><span class="pre">None</span></code></p>
<p>Specified on the command line only.</p>
<p>Takes a path to a configuration file to use for configuring logging.</p>
</dd>
</dl>
<section id="logging-options-available-only-in-configuration-files">
<h3>Logging Options Available Only in Configuration Files<a class="headerlink" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#logging-options-available-only-in-configuration-files" title="Link to this heading">¶</a></h3>
<p>You will want to place the different logging options in the <strong>[DEFAULT]</strong>
section in your application configuration file. As an example, you might
do the following for the API server, in a configuration file called
<code class="docutils literal notranslate"><span class="pre">etc/glance-api.conf</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">DEFAULT</span><span class="p">]</span>
<span class="n">log_file</span> <span class="o">=</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">log</span><span class="o">/</span><span class="n">glance</span><span class="o">/</span><span class="n">api</span><span class="o">.</span><span class="n">log</span>
</pre></div>
</div>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">log_file</span></code></dt><dd><p>The filepath of the file to use for logging messages from Glance’s servers.
If missing, the default is to output messages to <code class="docutils literal notranslate"><span class="pre">stdout</span></code>,
so if you are running Glance servers in a daemon mode
(using <code class="docutils literal notranslate"><span class="pre">glance-control</span></code>) you should make sure that the <code class="docutils literal notranslate"><span class="pre">log_file</span></code>
option is set appropriately.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">log_dir</span></code></dt><dd><p>The filepath of the directory to use for log files.
If not specified (the default) the <code class="docutils literal notranslate"><span class="pre">log_file</span></code> is used as
an absolute filepath.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">log_date_format</span></code></dt><dd><p>The format string for timestamps in the log output.</p>
<p>Defaults to <code class="docutils literal notranslate"><span class="pre">%Y-%m-%d</span> <span class="pre">%H:%M:%S</span></code>. See the
<a class="reference external" href="http://docs.python.org/library/logging.html">logging module</a>
documentation for more information on setting this format string.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">log_use_syslog</span></code></dt><dd><p>Use syslog logging functionality.</p>
<p>Defaults to False.</p>
</dd>
</dl>
</section>
</section>
<section id="configuring-glance-storage-backends">
<h2>Configuring Glance Storage Backends<a class="headerlink" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#configuring-glance-storage-backends" title="Link to this heading">¶</a></h2>
<p>There are a number of configuration options in Glance that control how Glance
stores disk images. Enabled backends must be defined in the <code class="docutils literal notranslate"><span class="pre">[DEFAULT]</span></code>
section.</p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">enabled_backends=store1_id:store1_type,</span> <span class="pre">store2_id:store2_type[,...]</span></code></dt><dd><p>Required.</p>
<p>A comma-separated list of “store_id:store_type” strings. The store ids can
be chosen by the user, whereas valid store types are (<code class="docutils literal notranslate"><span class="pre">file</span></code>,
<code class="docutils literal notranslate"><span class="pre">http</span></code>, <code class="docutils literal notranslate"><span class="pre">rbd</span></code>, <code class="docutils literal notranslate"><span class="pre">swift</span></code>, <code class="docutils literal notranslate"><span class="pre">cinder</span></code>, <code class="docutils literal notranslate"><span class="pre">vmware</span></code>, <code class="docutils literal notranslate"><span class="pre">s3</span></code>).</p>
</dd>
</dl>
<p>The default backend must then be set in the <code class="docutils literal notranslate"><span class="pre">[glance_store]</span></code> section:</p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">default_backend</span> <span class="pre">=</span> <span class="pre">store1_id</span></code></dt><dd><p>Required.</p>
<p>This option must be set to one of the store identifiers used in
<code class="docutils literal notranslate"><span class="pre">enabled_backends</span></code>.</p>
</dd>
</dl>
<p>Additionally, one section must be created for every key:value pair defined
in <code class="docutils literal notranslate"><span class="pre">enabled_backends</span></code>. Each section must be populated with store-specific
options. See <a class="reference internal" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#configuring-multiple-cinder-storage-backend"><span class="std std-ref">Configuring multiple Cinder Storage Backend</span></a> for a full
example.</p>
<section id="configuring-the-filesystem-storage-backend">
<h3>Configuring the Filesystem Storage Backend<a class="headerlink" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#configuring-the-filesystem-storage-backend" title="Link to this heading">¶</a></h3>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">filesystem_store_datadir=PATH</span></code></dt><dd><p>Optional. Default: <code class="docutils literal notranslate"><span class="pre">/var/lib/glance/images/</span></code></p>
<p>Can only be specified in configuration files.</p>
<p><cite>This option is specific to the filesystem storage backend.</cite></p>
<p>Sets the path where the filesystem storage backend write disk images.
Note that the filesystem storage backend will attempt to create this
directory if it does not exist. Ensure that the user that <code class="docutils literal notranslate"><span class="pre">glance-api</span></code>
runs under has write permissions to this directory.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">filesystem_store_file_perm=PERM_MODE</span></code></dt><dd><p>Optional. Default: <code class="docutils literal notranslate"><span class="pre">0</span></code></p>
<p>Can only be specified in configuration files.</p>
<p><cite>This option is specific to the filesystem storage backend.</cite></p>
<p>The required permission value, in octal representation, for the created
image file. You can use this value to specify the user of the consuming
service (such as Nova) as the only member of the group that owns
the created files. To keep the default value, assign a permission value that
is less than or equal to 0.  Note that the file owner must maintain read
permission; if this value removes that permission an error message
will be logged and the BadStoreConfiguration exception will be raised.
If the Glance service has insufficient privileges to change file access
permissions, a file will still be saved, but a warning message
will appear in the Glance log.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">filesystem_store_chunk_size=SIZE_IN_BYTES</span></code></dt><dd><p>Optional. Default: <code class="docutils literal notranslate"><span class="pre">65536</span></code></p>
<p>Can only be specified in configuration files.</p>
<p><cite>This option is specific to the filesystem storage backend.</cite></p>
<p>The chunk size used when reading or writing image files. Raising this value
may improve the throughput but it may also slightly increase the memory
usage when handling a large number of requests.</p>
</dd>
</dl>
</section>
<section id="configuring-the-filesystem-storage-backend-with-multiple-stores">
<h3>Configuring the Filesystem Storage Backend with multiple stores<a class="headerlink" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#configuring-the-filesystem-storage-backend-with-multiple-stores" title="Link to this heading">¶</a></h3>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">filesystem_store_datadirs=PATH:PRIORITY</span></code></dt><dd><p>Optional. Default: <code class="docutils literal notranslate"><span class="pre">/var/lib/glance/images/:1</span></code></p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">filesystem_store_datadirs</span> <span class="o">=</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">glance</span><span class="o">/</span><span class="n">store</span>
<span class="n">filesystem_store_datadirs</span> <span class="o">=</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">glance</span><span class="o">/</span><span class="n">store1</span><span class="p">:</span><span class="mi">100</span>
<span class="n">filesystem_store_datadirs</span> <span class="o">=</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">glance</span><span class="o">/</span><span class="n">store2</span><span class="p">:</span><span class="mi">200</span>
</pre></div>
</div>
<p>This option can only be specified in configuration file and is specific
to the filesystem storage backend only.</p>
<p>filesystem_store_datadirs option allows administrators to configure
multiple store directories to save glance image in filesystem storage
backend. Each directory can be coupled with its priority.</p>
<p><strong>NOTE</strong>:</p>
<ul class="simple">
<li><p>This option can be specified multiple times to specify multiple stores.</p></li>
<li><p>Either filesystem_store_datadir or filesystem_store_datadirs option must be
specified in glance-api.conf</p></li>
<li><p>Store with priority 200 has precedence over store with priority 100.</p></li>
<li><p>If no priority is specified, default priority ‘0’ is associated with it.</p></li>
<li><p>If two filesystem stores have same priority store with maximum free space
will be chosen to store the image.</p></li>
<li><p>If same store is specified multiple times then BadStoreConfiguration
exception will be raised.</p></li>
</ul>
</dd>
</dl>
</section>
<section id="configuring-the-swift-storage-backend">
<h3>Configuring the Swift Storage Backend<a class="headerlink" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#configuring-the-swift-storage-backend" title="Link to this heading">¶</a></h3>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">swift_store_auth_address=URL</span></code></dt><dd><p>Required when using the Swift storage backend.</p>
<p>Can only be specified in configuration files.</p>
<p>Deprecated. Use <code class="docutils literal notranslate"><span class="pre">auth_address</span></code> in the Swift back-end configuration
file instead.</p>
<p><cite>This option is specific to the Swift storage backend.</cite></p>
<p>Sets the authentication URL supplied to Swift when making calls to its
storage system. For more information about the Swift authentication system,
please see the
<a class="reference external" href="https://docs.openstack.org/swift/latest/overview_auth.html">Swift auth</a>
documentation.</p>
<p><strong>IMPORTANT NOTE</strong>: Swift authentication addresses use HTTPS by default. This
means that if you are running Swift with authentication over HTTP, you need
to set your <code class="docutils literal notranslate"><span class="pre">swift_store_auth_address</span></code> to the full URL,
including the <code class="docutils literal notranslate"><span class="pre">http://</span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">swift_store_user=USER</span></code></dt><dd><p>Required when using the Swift storage backend.</p>
<p>Can only be specified in configuration files.</p>
<p>Deprecated. Use <code class="docutils literal notranslate"><span class="pre">user</span></code> in the Swift back-end configuration file instead.</p>
<p><cite>This option is specific to the Swift storage backend.</cite></p>
<p>Sets the user to authenticate against the <code class="docutils literal notranslate"><span class="pre">swift_store_auth_address</span></code> with.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">swift_store_key=KEY</span></code></dt><dd><p>Required when using the Swift storage backend.</p>
<p>Can only be specified in configuration files.</p>
<p>Deprecated. Use <code class="docutils literal notranslate"><span class="pre">key</span></code> in the Swift back-end configuration file instead.</p>
<p><cite>This option is specific to the Swift storage backend.</cite></p>
<p>Sets the authentication key to authenticate against the
<code class="docutils literal notranslate"><span class="pre">swift_store_auth_address</span></code> with for the user <code class="docutils literal notranslate"><span class="pre">swift_store_user</span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">swift_store_container=CONTAINER</span></code></dt><dd><p>Optional. Default: <code class="docutils literal notranslate"><span class="pre">glance</span></code></p>
<p>Can only be specified in configuration files.</p>
<p><cite>This option is specific to the Swift storage backend.</cite></p>
<p>Sets the name of the container to use for Glance images in Swift.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">swift_store_create_container_on_put</span></code></dt><dd><p>Optional. Default: <code class="docutils literal notranslate"><span class="pre">False</span></code></p>
<p>Can only be specified in configuration files.</p>
<p><cite>This option is specific to the Swift storage backend.</cite></p>
<p>If true, Glance will attempt to create the container
<code class="docutils literal notranslate"><span class="pre">swift_store_container</span></code> if it does not exist.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">swift_store_large_object_size=SIZE_IN_MB</span></code></dt><dd><p>Optional. Default: <code class="docutils literal notranslate"><span class="pre">5120</span></code></p>
<p>Can only be specified in configuration files.</p>
<p><cite>This option is specific to the Swift storage backend.</cite></p>
<p>What size, in MB, should Glance start chunking image files
and do a large object manifest in Swift? By default, this is
the maximum object size in Swift, which is 5GB</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">swift_store_large_object_chunk_size=SIZE_IN_MB</span></code></dt><dd><p>Optional. Default: <code class="docutils literal notranslate"><span class="pre">200</span></code></p>
<p>Can only be specified in configuration files.</p>
<p><cite>This option is specific to the Swift storage backend.</cite></p>
<p>When doing a large object manifest, what size, in MB, should
Glance write chunks to Swift?  The default is 200MB.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">swift_store_multi_tenant=False</span></code></dt><dd><p>Optional. Default: <code class="docutils literal notranslate"><span class="pre">False</span></code></p>
<p>Can only be specified in configuration files.</p>
<p><cite>This option is specific to the Swift storage backend.</cite></p>
<p>If set to True enables multi-tenant storage mode which causes Glance images
to be stored in tenant specific Swift accounts. When set to False Glance
stores all images in a single Swift account.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">swift_store_multiple_containers_seed</span></code></dt><dd><p>Optional. Default: <code class="docutils literal notranslate"><span class="pre">0</span></code></p>
<p>Can only be specified in configuration files.</p>
<p><cite>This option is specific to the Swift storage backend.</cite></p>
<p>When set to 0, a single-tenant store will only use one container to store all
images. When set to an integer value between 1 and 32, a single-tenant store
will use multiple containers to store images, and this value will determine
how many characters from an image UUID are checked when determining what
container to place the image in. The maximum number of containers that will
be created is approximately equal to 16^N. This setting is used only when
swift_store_multi_tenant is disabled.</p>
<p>Example: if this config option is set to 3 and
swift_store_container = ‘glance’, then an image with UUID
‘fdae39a1-bac5-4238-aba4-69bcc726e848’ would be placed in the container
‘glance_fda’. All dashes in the UUID are included when creating the container
name but do not count toward the character limit, so in this example
with N=10 the container name would be ‘glance_fdae39a1-ba’.</p>
<p>When choosing the value for swift_store_multiple_containers_seed, deployers
should discuss a suitable value with their swift operations team. The authors
of this option recommend that large scale deployments use a value of ‘2’,
which will create a maximum of ~256 containers. Choosing a higher number than
this, even in extremely large scale deployments, may not have any positive
impact on performance and could lead to a large number of empty, unused
containers. The largest of deployments could notice an increase in
performance if swift rate limits are throttling on single container.
Note: If dynamic container creation is turned off, any value for this
configuration option higher than ‘1’ may be unreasonable as the deployer
would have to manually create each container.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">swift_store_admin_tenants</span></code></dt><dd><p>Can only be specified in configuration files.</p>
<p><cite>This option is specific to the Swift storage backend.</cite></p>
<p>Optional. Default: Not set.</p>
<p>A list of swift ACL strings that will be applied as both read and
write ACLs to the containers created by Glance in multi-tenant
mode. This grants the specified tenants/users read and write access
to all newly created image objects. The standard swift ACL string
formats are allowed, including:</p>
<p>&lt;tenant_id&gt;:&lt;username&gt;
&lt;tenant_name&gt;:&lt;username&gt;
*:&lt;username&gt;</p>
<p>Multiple ACLs can be combined using a comma separated list, for
example: swift_store_admin_tenants = <a class="reference external" href="service:glance,*:admin">service:glance,*:admin</a></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">swift_store_auth_version</span></code></dt><dd><p>Can only be specified in configuration files.</p>
<p>Deprecated. Use <code class="docutils literal notranslate"><span class="pre">auth_version</span></code> in the Swift back-end configuration
file instead.</p>
<p><cite>This option is specific to the Swift storage backend.</cite></p>
<p>Optional. Default: <code class="docutils literal notranslate"><span class="pre">2</span></code></p>
<p>A string indicating which version of Swift OpenStack authentication
to use. See the project
<a class="reference external" href="https://docs.openstack.org/python-swiftclient/latest/">python-swiftclient</a>
for more details.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">swift_store_service_type</span></code></dt><dd><p>Can only be specified in configuration files.</p>
<p><cite>This option is specific to the Swift storage backend.</cite></p>
<p>Optional. Default: <code class="docutils literal notranslate"><span class="pre">object-store</span></code></p>
<p>A string giving the service type of the swift service to use. This
setting is only used if swift_store_auth_version is <code class="docutils literal notranslate"><span class="pre">2</span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">swift_store_region</span></code></dt><dd><p>Can only be specified in configuration files.</p>
<p><cite>This option is specific to the Swift storage backend.</cite></p>
<p>Optional. Default: Not set.</p>
<p>A string giving the region of the swift service endpoint to use. This
setting is only used if swift_store_auth_version is <code class="docutils literal notranslate"><span class="pre">2</span></code>. This
setting is especially useful for disambiguation if multiple swift
services might appear in a service catalog during authentication.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">swift_store_endpoint_type</span></code></dt><dd><p>Can only be specified in configuration files.</p>
<p><cite>This option is specific to the Swift storage backend.</cite></p>
<p>Optional. Default: <code class="docutils literal notranslate"><span class="pre">publicURL</span></code></p>
<p>A string giving the endpoint type of the swift service endpoint to
use. This setting is only used if swift_store_auth_version is <code class="docutils literal notranslate"><span class="pre">2</span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">swift_store_ssl_compression</span></code></dt><dd><p>Can only be specified in configuration files.</p>
<p><cite>This option is specific to the Swift storage backend.</cite></p>
<p>Optional. Default: True.</p>
<p>If set to False, disables SSL layer compression of https swift
requests. Setting to ‘False’ may improve performance for images which
are already in a compressed format, e.g. qcow2. If set to True then
compression will be enabled (provided it is supported by the swift
proxy).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">swift_store_cacert</span></code></dt><dd><p>Can only be specified in configuration files.</p>
<p>Optional. Default: <code class="docutils literal notranslate"><span class="pre">None</span></code></p>
<p>A string giving the path to a CA certificate bundle that will allow Glance’s
services to perform SSL verification when communicating with Swift.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">swift_store_retry_get_count</span></code></dt><dd><p>The number of times a Swift download will be retried before the request
fails.
Optional. Default: <code class="docutils literal notranslate"><span class="pre">0</span></code></p>
</dd>
</dl>
<section id="configuring-multiple-swift-accounts-stores">
<h4>Configuring Multiple Swift Accounts/Stores<a class="headerlink" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#configuring-multiple-swift-accounts-stores" title="Link to this heading">¶</a></h4>
<p>In order to not store Swift account credentials in the database, and to
have support for multiple accounts (or multiple Swift backing stores), a
reference is stored in the database and the corresponding configuration
(credentials/ parameters) details are stored in the configuration file.
Optional.  Default: not enabled.</p>
<p>The location for this file is specified using the <code class="docutils literal notranslate"><span class="pre">swift_store_config_file</span></code>
configuration file in the section <code class="docutils literal notranslate"><span class="pre">[DEFAULT]</span></code>. <strong>If an incorrect value is
specified, Glance API Swift store service will not be configured.</strong></p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">swift_store_config_file=PATH</span></code></dt><dd><p><cite>This option is specific to the Swift storage backend.</cite></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">default_swift_reference=DEFAULT_REFERENCE</span></code></dt><dd><p>Required when multiple Swift accounts/backing stores are configured.</p>
<p>Can only be specified in configuration files.</p>
<p><cite>This option is specific to the Swift storage backend.</cite></p>
<p>It is the default swift reference that is used to add any new images.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">swift_store_auth_insecure</span></code></dt><dd><p>If True, bypass SSL certificate verification for Swift.</p>
<p>Can only be specified in configuration files.</p>
<p><cite>This option is specific to the Swift storage backend.</cite></p>
<p>Optional. Default: <code class="docutils literal notranslate"><span class="pre">False</span></code></p>
</dd>
</dl>
</section>
<section id="configuring-swift-configuration-file">
<h4>Configuring Swift configuration file<a class="headerlink" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#configuring-swift-configuration-file" title="Link to this heading">¶</a></h4>
<p>If <code class="docutils literal notranslate"><span class="pre">swift_store_config_file</span></code> is set, Glance will use information
from the file specified under this parameter.</p>
<div class="admonition note">
<p class="admonition-title"><div class="fa fa-fw fa-check-circle">&nbsp;</div>Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">swift_store_config_file</span></code> is currently used only for single-tenant
Swift store configurations. If you configure a multi-tenant Swift store
back end (<code class="docutils literal notranslate"><span class="pre">swift_store_multi_tenant=True</span></code>), ensure that both
<code class="docutils literal notranslate"><span class="pre">swift_store_config_file</span></code> and <code class="docutils literal notranslate"><span class="pre">default_swift_reference</span></code> are <em>not</em> set.</p>
</div>
<p>The file contains a set of references like:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[ref1]</span>
<span class="na">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">tenant:user1</span>
<span class="na">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">key1</span>
<span class="na">auth_version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">2</span>
<span class="na">auth_address</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">http://localhost:5000/v2.0</span>

<span class="k">[ref2]</span>
<span class="na">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">project_name:user_name2</span>
<span class="na">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">key2</span>
<span class="na">user_domain_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">default</span>
<span class="na">project_domain_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">default</span>
<span class="na">auth_version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">3</span>
<span class="na">auth_address</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">http://localhost:5000/v3</span>
</pre></div>
</div>
<p>A default reference must be configured. Its parameters will be used when
creating new images. For example, to specify <code class="docutils literal notranslate"><span class="pre">ref2</span></code> as the default
reference, add the following value to the [glance_store] section of
<code class="file docutils literal notranslate"><span class="pre">glance-api.conf</span></code> file:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="na">default_swift_reference</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">ref2</span>
</pre></div>
</div>
<p>In the reference, a user can specify the following parameters:</p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">user</span></code></dt><dd><p>A <em>project_name user_name</em> pair in the <code class="docutils literal notranslate"><span class="pre">project_name:user_name</span></code> format
to authenticate against the Swift authentication service.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">key</span></code></dt><dd><p>An authentication key for a user authenticating against the Swift
authentication service.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">auth_address</span></code></dt><dd><p>An address where the Swift authentication service is located.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">auth_version</span></code></dt><dd><p>A version of the authentication service to use.
Valid versions are <code class="docutils literal notranslate"><span class="pre">2</span></code> and <code class="docutils literal notranslate"><span class="pre">3</span></code> for Keystone and <code class="docutils literal notranslate"><span class="pre">1</span></code>
(deprecated) for Swauth and Rackspace.</p>
<p>Optional. Default: <code class="docutils literal notranslate"><span class="pre">2</span></code></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">project_domain_id</span></code></dt><dd><p>A domain ID of the project which is the requested project-level
authorization scope.</p>
<p>Optional. Default: <code class="docutils literal notranslate"><span class="pre">None</span></code></p>
<p><cite>This option can be specified if ``auth_version`</cite> is <code class="docutils literal notranslate"><span class="pre">3</span></code> .`</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">project_domain_name</span></code></dt><dd><p>A domain name of the project which is the requested project-level
authorization scope.</p>
<p>Optional. Default: <code class="docutils literal notranslate"><span class="pre">None</span></code></p>
<p><cite>This option can be specified if ``auth_version`</cite> is <code class="docutils literal notranslate"><span class="pre">3</span></code> .`</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">user_domain_id</span></code></dt><dd><p>A domain ID of the user which is the requested domain-level
authorization scope.</p>
<p>Optional. Default: <code class="docutils literal notranslate"><span class="pre">None</span></code></p>
<p><cite>This option can be specified if ``auth_version`</cite> is <code class="docutils literal notranslate"><span class="pre">3</span></code> .`</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">user_domain_name</span></code></dt><dd><p>A domain name of the user which is the requested domain-level
authorization scope.</p>
<p>Optional. Default: <code class="docutils literal notranslate"><span class="pre">None</span></code></p>
<p><cite>This option can be specified if ``auth_version`</cite> is <code class="docutils literal notranslate"><span class="pre">3</span></code>. `</p>
</dd>
</dl>
</section>
</section>
<section id="configuring-the-rbd-storage-backend">
<h3>Configuring the RBD Storage Backend<a class="headerlink" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#configuring-the-rbd-storage-backend" title="Link to this heading">¶</a></h3>
<p><strong>Note</strong>: the RBD storage backend requires the python bindings for
librados and librbd. These are in the python-ceph package on
Debian-based distributions.</p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">rbd_store_pool=POOL</span></code></dt><dd><p>Optional. Default: <code class="docutils literal notranslate"><span class="pre">rbd</span></code></p>
<p>Can only be specified in configuration files.</p>
<p><cite>This option is specific to the RBD storage backend.</cite></p>
<p>Sets the RADOS pool in which images are stored.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">rbd_store_chunk_size=CHUNK_SIZE_MB</span></code></dt><dd><p>Optional. Default: <code class="docutils literal notranslate"><span class="pre">8</span></code></p>
<p>Can only be specified in configuration files.</p>
<p><cite>This option is specific to the RBD storage backend.</cite></p>
<p>Images will be chunked into objects of this size (in megabytes).
For best performance, this should be a power of two.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">rados_connect_timeout</span></code></dt><dd><p>Optional. Default: <code class="docutils literal notranslate"><span class="pre">0</span></code></p>
<p>Can only be specified in configuration files.</p>
<p><cite>This option is specific to the RBD storage backend.</cite></p>
<p>Prevents glance-api hangups during the connection to RBD. Sets the time
to wait (in seconds) for glance-api before closing the connection.
Setting <code class="docutils literal notranslate"><span class="pre">rados_connect_timeout&lt;=0</span></code> means no timeout.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">rbd_store_ceph_conf=PATH</span></code></dt><dd><p>Optional. Default: <code class="docutils literal notranslate"><span class="pre">/etc/ceph/ceph.conf</span></code>, <code class="docutils literal notranslate"><span class="pre">~/.ceph/config</span></code>, and
<code class="docutils literal notranslate"><span class="pre">./ceph.conf</span></code></p>
<p>Can only be specified in configuration files.</p>
<p><cite>This option is specific to the RBD storage backend.</cite></p>
<p>Sets the Ceph configuration file to use.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">rbd_store_user=NAME</span></code></dt><dd><p>Optional. Default: <code class="docutils literal notranslate"><span class="pre">admin</span></code></p>
<p>Can only be specified in configuration files.</p>
<p><cite>This option is specific to the RBD storage backend.</cite></p>
<p>Sets the RADOS user to authenticate as. This is only needed
when <a class="reference external" href="https://docs.ceph.com/en/latest/rados/configuration/auth-config-ref/">RADOS authentication</a>
is enabled.</p>
</dd>
</dl>
<p>A keyring must be set for this user in the Ceph
configuration file, e.g. with a user <code class="docutils literal notranslate"><span class="pre">glance</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">client</span><span class="o">.</span><span class="n">glance</span><span class="p">]</span>
<span class="n">keyring</span><span class="o">=/</span><span class="n">etc</span><span class="o">/</span><span class="n">glance</span><span class="o">/</span><span class="n">rbd</span><span class="o">.</span><span class="n">keyring</span>
</pre></div>
</div>
<p>To set up a user named <code class="docutils literal notranslate"><span class="pre">glance</span></code> with minimal permissions,
using a pool called <code class="docutils literal notranslate"><span class="pre">images</span></code>, run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rados</span> <span class="n">mkpool</span> <span class="n">images</span>
<span class="n">ceph</span><span class="o">-</span><span class="n">authtool</span> <span class="o">--</span><span class="n">create</span><span class="o">-</span><span class="n">keyring</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">glance</span><span class="o">/</span><span class="n">rbd</span><span class="o">.</span><span class="n">keyring</span>
<span class="n">ceph</span><span class="o">-</span><span class="n">authtool</span> <span class="o">--</span><span class="n">gen</span><span class="o">-</span><span class="n">key</span> <span class="o">--</span><span class="n">name</span> <span class="n">client</span><span class="o">.</span><span class="n">glance</span> <span class="o">--</span><span class="n">cap</span> <span class="n">mon</span> <span class="s1">'allow r'</span> <span class="o">--</span><span class="n">cap</span> <span class="n">osd</span> <span class="s1">'allow rwx pool=images'</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">glance</span><span class="o">/</span><span class="n">rbd</span><span class="o">.</span><span class="n">keyring</span>
<span class="n">ceph</span> <span class="n">auth</span> <span class="n">add</span> <span class="n">client</span><span class="o">.</span><span class="n">glance</span> <span class="o">-</span><span class="n">i</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">glance</span><span class="o">/</span><span class="n">rbd</span><span class="o">.</span><span class="n">keyring</span>
</pre></div>
</div>
</section>
<section id="configuring-the-cinder-storage-backend">
<h3>Configuring the Cinder Storage Backend<a class="headerlink" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#configuring-the-cinder-storage-backend" title="Link to this heading">¶</a></h3>
<p>The cinder store gives you the ability to store images in volumes
(one volume per image) in the Block Storage (Cinder) service.
Glance does not have direct access to whatever backend(s) are configured
for Cinder; it simply hands the image data over to the Block Storage
service, and Cinder decides where exactly it will be stored.</p>
<p>Glance can influence where the data will be stored by setting the
<code class="docutils literal notranslate"><span class="pre">cinder_volume_type</span></code> option when configuring your cinder store.
See below for details.</p>
<p><strong>Note</strong>: To create a Cinder volume from an image in this store quickly,
additional settings are required. Please see the
<a class="reference external" href="https://docs.openstack.org/cinder/latest/admin/blockstorage-volume-backed-image.html">Volume-backed image</a>
documentation for more information.</p>
<div class="admonition warning">
<p class="admonition-title"><div class="fa fa-fw fa-exclamation-triangle">&nbsp;</div>Warning</p>
<p>Because an Image-Volume created in a user account is susceptible to
modifications by normal users that can corrupt the image, we recommend
that service credentials should <em>always</em> be set in the configuration file
so that the Image-Volume will be created in an internal project not
directly accessible by non-service users.</p>
<p>To create the Image-Volume in internal project, we need to set the following
configuration parameters to the glance service user and the internal service
project:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cinder_store_user_name</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cinder_store_password</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cinder_store_project_name</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cinder_store_auth_address</span></code></p></li>
</ul>
</div>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">cinder_catalog_info=&lt;service_type&gt;:&lt;service_name&gt;:&lt;endpoint_type&gt;</span></code></dt><dd><p>Optional. Default: <code class="docutils literal notranslate"><span class="pre">volumev3::publicURL</span></code></p>
<p>Can only be specified in configuration files.</p>
<p><cite>This option is specific to the Cinder storage backend.</cite></p>
<p>Sets the info to match when looking for cinder in the service catalog.
Format is :
separated values of the form: &lt;service_type&gt;:&lt;service_name&gt;:&lt;endpoint_type&gt;</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cinder_endpoint_template=http://ADDR:PORT/VERSION/%(tenant)s</span></code></dt><dd><p>Optional. Default: <code class="docutils literal notranslate"><span class="pre">None</span></code></p>
<p>Can only be specified in configuration files.</p>
<p><cite>This option is specific to the Cinder storage backend.</cite></p>
<p>Override service catalog lookup with template for cinder endpoint.
<code class="docutils literal notranslate"><span class="pre">%(...)s</span></code> parts are replaced by the value in the request context.
e.g. <a class="reference external" href="http://localhost:8776/v3/%(tenant)s">http://localhost:8776/v3/%(tenant)s</a></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">os_region_name=REGION_NAME</span></code></dt><dd><p>Optional. Default: <code class="docutils literal notranslate"><span class="pre">None</span></code></p>
<p>Can only be specified in configuration files.</p>
<p><cite>This option is specific to the Cinder storage backend.</cite></p>
<p>Region name of this node.</p>
<p>Deprecated. Use <code class="docutils literal notranslate"><span class="pre">cinder_os_region_name</span></code> instead.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cinder_os_region_name=REGION_NAME</span></code></dt><dd><p>Optional. Default: <code class="docutils literal notranslate"><span class="pre">None</span></code></p>
<p>Can only be specified in configuration files.</p>
<p><cite>This option is specific to the Cinder storage backend.</cite></p>
<p>Region name of this node.  If specified, it is used to locate cinder from
the service catalog.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cinder_ca_certificates_file=CA_FILE_PATH</span></code></dt><dd><p>Optional. Default: <code class="docutils literal notranslate"><span class="pre">None</span></code></p>
<p>Can only be specified in configuration files.</p>
<p><cite>This option is specific to the Cinder storage backend.</cite></p>
<p>Location of ca certificates file to use for cinder client requests.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cinder_http_retries=TIMES</span></code></dt><dd><p>Optional. Default: <code class="docutils literal notranslate"><span class="pre">3</span></code></p>
<p>Can only be specified in configuration files.</p>
<p><cite>This option is specific to the Cinder storage backend.</cite></p>
<p>Number of cinderclient retries on failed http calls.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cinder_state_transition_timeout</span></code></dt><dd><p>Optional. Default: <code class="docutils literal notranslate"><span class="pre">300</span></code></p>
<p>Can only be specified in configuration files.</p>
<p><cite>This option is specific to the Cinder storage backend.</cite></p>
<p>Time period, in seconds, to wait for a cinder volume transition to complete.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cinder_api_insecure=ON_OFF</span></code></dt><dd><p>Optional. Default: <code class="docutils literal notranslate"><span class="pre">False</span></code></p>
<p>Can only be specified in configuration files.</p>
<p><cite>This option is specific to the Cinder storage backend.</cite></p>
<p>Allow to perform insecure SSL requests to cinder.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cinder_store_user_name=NAME</span></code></dt><dd><p>Optional. Default: <code class="docutils literal notranslate"><span class="pre">None</span></code></p>
<p>Can only be specified in configuration files.</p>
<p><cite>This option is specific to the Cinder storage backend.</cite></p>
<p>User name to authenticate against Cinder. If &lt;None&gt;, the user of current
context is used.</p>
<p><strong>NOTE</strong>: This option is applied only if all of <code class="docutils literal notranslate"><span class="pre">cinder_store_user_name</span></code>,
<code class="docutils literal notranslate"><span class="pre">cinder_store_password</span></code>, <code class="docutils literal notranslate"><span class="pre">cinder_store_project_name</span></code> and
<code class="docutils literal notranslate"><span class="pre">cinder_store_auth_address</span></code> are set.
These options are useful to put image volumes into the internal service
project in order to hide the volume from users, and to make the image
shareable among projects.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cinder_store_user_domain_name=NAME</span></code></dt><dd><p>Optional. Default: <code class="docutils literal notranslate"><span class="pre">Default</span></code></p>
<p>Can only be specified in configuration files.</p>
<p><cite>This option is specific to the Cinder storage backend.</cite></p>
<p>Domain of the user to authenticate against cinder.</p>
<p><strong>NOTE</strong>: This option is applied only if all of <code class="docutils literal notranslate"><span class="pre">cinder_store_user_name</span></code>,
<code class="docutils literal notranslate"><span class="pre">cinder_store_password</span></code>, <code class="docutils literal notranslate"><span class="pre">cinder_store_project_name</span></code> and
<code class="docutils literal notranslate"><span class="pre">cinder_store_auth_address</span></code> are set.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cinder_store_password=PASSWORD</span></code></dt><dd><p>Optional. Default: <code class="docutils literal notranslate"><span class="pre">None</span></code></p>
<p>Can only be specified in configuration files.</p>
<p><cite>This option is specific to the Cinder storage backend.</cite></p>
<p>Password for the user authenticating against Cinder. If &lt;None&gt;, the current
context auth token is used.</p>
<p><strong>NOTE</strong>: This option is applied only if all of <code class="docutils literal notranslate"><span class="pre">cinder_store_user_name</span></code>,
<code class="docutils literal notranslate"><span class="pre">cinder_store_password</span></code>, <code class="docutils literal notranslate"><span class="pre">cinder_store_project_name</span></code> and
<code class="docutils literal notranslate"><span class="pre">cinder_store_auth_address</span></code> are set.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cinder_store_project_name=NAME</span></code></dt><dd><p>Optional. Default: <code class="docutils literal notranslate"><span class="pre">None</span></code></p>
<p>Can only be specified in configuration files.</p>
<p><cite>This option is specific to the Cinder storage backend.</cite></p>
<p>Project name where the image is stored in Cinder. If &lt;None&gt;, the project
in current context is used.</p>
<p><strong>NOTE</strong>: This option is applied only if all of <code class="docutils literal notranslate"><span class="pre">cinder_store_user_name</span></code>,
<code class="docutils literal notranslate"><span class="pre">cinder_store_password</span></code>, <code class="docutils literal notranslate"><span class="pre">cinder_store_project_name</span></code> and
<code class="docutils literal notranslate"><span class="pre">cinder_store_auth_address</span></code> are set.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cinder_store_project_domain_name=NAME</span></code></dt><dd><p>Optional. Default: <code class="docutils literal notranslate"><span class="pre">Default</span></code></p>
<p>Can only be specified in configuration files.</p>
<p><cite>This option is specific to the Cinder storage backend.</cite></p>
<p>Domain of the project where the image volume is stored in cinder.</p>
<p><strong>NOTE</strong>: This option is applied only if all of <code class="docutils literal notranslate"><span class="pre">cinder_store_user_name</span></code>,
<code class="docutils literal notranslate"><span class="pre">cinder_store_password</span></code>, <code class="docutils literal notranslate"><span class="pre">cinder_store_project_name</span></code> and
<code class="docutils literal notranslate"><span class="pre">cinder_store_auth_address</span></code> are set.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cinder_store_auth_address=URL</span></code></dt><dd><p>Optional. Default: <code class="docutils literal notranslate"><span class="pre">None</span></code></p>
<p>Can only be specified in configuration files.</p>
<p><cite>This option is specific to the Cinder storage backend.</cite></p>
<p>The address where the Cinder authentication service is listening. If &lt;None&gt;,
the cinder endpoint in the service catalog is used.</p>
<p><strong>NOTE</strong>: This option is applied only if all of <code class="docutils literal notranslate"><span class="pre">cinder_store_user_name</span></code>,
<code class="docutils literal notranslate"><span class="pre">cinder_store_password</span></code>, <code class="docutils literal notranslate"><span class="pre">cinder_store_project_name</span></code> and
<code class="docutils literal notranslate"><span class="pre">cinder_store_auth_address</span></code> are set.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">rootwrap_config=NAME</span></code></dt><dd><p>Optional. Default: <code class="docutils literal notranslate"><span class="pre">/etc/glance/rootwrap.conf</span></code></p>
<p>Can only be specified in configuration files.</p>
<p><cite>This option is specific to the Cinder storage backend.</cite></p>
<p>Path to the rootwrap configuration file to use for running commands as root.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">lock_path</span></code></dt><dd><p>Required.  Defaults to environment variable OSLO_LOCK_PATH, though we
recommend setting a value in the configuration file.</p>
<p>This specifies the directory to use for lock files.</p>
<p>NOTE: This option must be set in the <code class="docutils literal notranslate"><span class="pre">[oslo_concurrency]</span></code> section of the
configuration file.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[oslo_concurrency]</span>
<span class="c1"># ...</span>
<span class="na">lock_path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">/var/lib/glance/tmp</span>
</pre></div>
</div>
</dd>
</dl>
</section>
</section>
<section id="configuring-multi-attach-volume-type">
<h2>Configuring multi-attach volume type<a class="headerlink" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#configuring-multi-attach-volume-type" title="Link to this heading">¶</a></h2>
<p>When using Cinder as Glance backend, we store the image into an Image-Volume
residing in the <code class="docutils literal notranslate"><span class="pre">service</span></code> project owned by the <code class="docutils literal notranslate"><span class="pre">glance</span></code> user
(recommended).</p>
<p>When we use the image to create a volume or a server, the Image-Volume gets
attached to the Glance host and we copy the image data to the destination
whether being the volume or the server.</p>
<p>This workflow can cause problem when we try to create multiple resources using
the same image since Cinder volumes, by default, does not provide the ability
to attach the same volume multiple times.</p>
<p>This requires a special feature called
<a class="reference external" href="https://docs.openstack.org/cinder/latest/admin/volume-multiattach.html">Volume multi-attach</a>
which enables the volume to be attached multiple times to same or different
host.</p>
<p>To enable multi-attach functionality for Image-Volumes, we can perform the
following steps:</p>
<ul class="simple">
<li><p>Create a multiattach volume type and set the <code class="docutils literal notranslate"><span class="pre">&lt;is&gt;</span> <span class="pre">multiattach</span></code> property</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>openstack<span class="w"> </span>volume<span class="w"> </span><span class="nb">type</span><span class="w"> </span>create<span class="w"> </span>glance-multiattach
<span class="gp">$ </span>openstack<span class="w"> </span>volume<span class="w"> </span><span class="nb">type</span><span class="w"> </span><span class="nb">set</span><span class="w"> </span>--property<span class="w"> </span><span class="nv">multiattach</span><span class="o">=</span><span class="s2">"&lt;is&gt; True"</span><span class="w">  </span>glance-multiattach
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title"><div class="fa fa-fw fa-check-circle">&nbsp;</div>Note</p>
<p>Creating a new volume type is an admin-only operation by default.</p>
</div>
<ul class="simple">
<li><p><strong>(OPTIONAL)</strong> Set the <code class="docutils literal notranslate"><span class="pre">volume_backend_name</span></code> property</p></li>
</ul>
<p>Once you create the multi-attach volume type for Glance, you should also set
the <code class="docutils literal notranslate"><span class="pre">volume_backend_name</span></code> property so that your Image-Volumes don’t end up
in random backends based on the scheduling done by Cinder.</p>
<div class="admonition note">
<p class="admonition-title"><div class="fa fa-fw fa-check-circle">&nbsp;</div>Note</p>
<p>This is not needed if you are going to re-use the existing volume types
created for Cinder volumes.</p>
</div>
<p>Ask your Cinder administrator for the right <code class="docutils literal notranslate"><span class="pre">volume_backend_name</span></code> to set
for your multi-attach volume type. Here we are using <code class="docutils literal notranslate"><span class="pre">LVM_iSCSI</span></code> as an
example.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>openstack<span class="w"> </span>volume<span class="w"> </span><span class="nb">type</span><span class="w"> </span><span class="nb">set</span><span class="w"> </span>glance-multiattach<span class="w"> </span>--property<span class="w"> </span><span class="nv">volume_backend_name</span><span class="o">=</span>LVM_iSCSI
</pre></div>
</div>
<ul class="simple">
<li><p>Finally you need to set the multi-attach volume type as the value of
<code class="docutils literal notranslate"><span class="pre">cinder_volume_type</span></code> config option to use it for creating Image-Volumes.</p></li>
</ul>
<p>In glance-api.conf:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">DEFAULT</span><span class="p">]</span>
<span class="c1"># list of enabled stores identified by their property group name</span>
<span class="n">enabled_backends</span> <span class="o">=</span> <span class="n">fast</span><span class="p">:</span><span class="n">cinder</span>

<span class="c1"># the default store, if not set glance-api service will not start</span>
<span class="p">[</span><span class="n">glance_store</span><span class="p">]</span>
<span class="n">default_backend</span> <span class="o">=</span> <span class="n">fast</span>

<span class="c1"># conf props for fast store instance</span>
<span class="p">[</span><span class="n">fast</span><span class="p">]</span>
<span class="o">...</span>
<span class="n">cinder_volume_type</span> <span class="o">=</span> <span class="n">glance</span><span class="o">-</span><span class="n">multiattach</span>
</pre></div>
</div>
<section id="configuring-multiple-cinder-storage-backend">
<span id="id2"></span><h3>Configuring multiple Cinder Storage Backend<a class="headerlink" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#configuring-multiple-cinder-storage-backend" title="Link to this heading">¶</a></h3>
<p>From Victoria onwards Glance fully supports configuring multiple cinder
stores by taking advantage of cinder <code class="docutils literal notranslate"><span class="pre">volume-types</span></code>. Note that volume-types
are defined by a Cinder administrator, and hence setting up multiple cinder
stores will require collaboration with the Cinder admin.</p>
<p>From the Glance side, you will add each of the cinder stores you want to
define to the <code class="docutils literal notranslate"><span class="pre">enabled_backends</span></code> configuration option in glance
configuration file. For each of these stores, you must then set the
<code class="docutils literal notranslate"><span class="pre">cinder_volume_type</span></code> configuration option in the store’s specific
configuration section of glance-api.conf. What to set it to will depend on
the volume-types that are available in Cinder; consult with your Cinder
administrator to get a list of appropriate volume-types.</p>
<div class="admonition warning">
<p class="admonition-title"><div class="fa fa-fw fa-exclamation-triangle">&nbsp;</div>Warning</p>
<p>It is mandatory to set the following configuration parameters for
multiple cinder stores to work:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cinder_store_user_name</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cinder_store_password</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cinder_store_project_name</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cinder_store_auth_address</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cinder_volume_type</span></code></p></li>
</ul>
<p>This is because, when initializing the cinder store, we query cinder
to validate the volume types set in the glance configuration file using
the above credentials. If this is not validated during sevice start, we
might fail to create the image later due to invalid volume type being
configured.</p>
</div>
<p>Below are some multiple cinder store configuration examples.</p>
<p>Example 1: Fresh deployment</p>
<p>For example, if cinder has configured 2 volume types <cite>fast</cite> and <cite>slow</cite> then
glance configuration should look like;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">DEFAULT</span><span class="p">]</span>
<span class="c1"># list of enabled stores identified by their property group name</span>
<span class="n">enabled_backends</span> <span class="o">=</span> <span class="n">fast</span><span class="p">:</span><span class="n">cinder</span><span class="p">,</span> <span class="n">slow</span><span class="p">:</span><span class="n">cinder</span>

<span class="c1"># the default store, if not set glance-api service will not start</span>
<span class="p">[</span><span class="n">glance_store</span><span class="p">]</span>
<span class="n">default_backend</span> <span class="o">=</span> <span class="n">fast</span>

<span class="c1"># conf props for fast store instance</span>
<span class="p">[</span><span class="n">fast</span><span class="p">]</span>
<span class="n">rootwrap_config</span> <span class="o">=</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">glance</span><span class="o">/</span><span class="n">rootwrap</span><span class="o">.</span><span class="n">conf</span>
<span class="n">cinder_volume_type</span> <span class="o">=</span> <span class="n">glance</span><span class="o">-</span><span class="n">fast</span>
<span class="n">description</span> <span class="o">=</span> <span class="n">LVM</span> <span class="n">based</span> <span class="n">cinder</span> <span class="n">store</span>
<span class="n">cinder_catalog_info</span> <span class="o">=</span> <span class="n">volumev3</span><span class="p">::</span><span class="n">publicURL</span>
<span class="n">cinder_store_auth_address</span> <span class="o">=</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="o">/</span><span class="n">identity</span><span class="o">/</span><span class="n">v3</span>
<span class="n">cinder_store_user_name</span> <span class="o">=</span> <span class="n">glance</span>
<span class="n">cinder_store_password</span> <span class="o">=</span> <span class="n">admin</span>
<span class="n">cinder_store_project_name</span> <span class="o">=</span> <span class="n">service</span>
<span class="c1"># etc..</span>

<span class="c1"># conf props for slow store instance</span>
<span class="p">[</span><span class="n">slow</span><span class="p">]</span>
<span class="n">rootwrap_config</span> <span class="o">=</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">glance</span><span class="o">/</span><span class="n">rootwrap</span><span class="o">.</span><span class="n">conf</span>
<span class="n">cinder_volume_type</span> <span class="o">=</span> <span class="n">glance</span><span class="o">-</span><span class="n">slow</span>
<span class="n">description</span> <span class="o">=</span> <span class="n">NFS</span> <span class="n">based</span> <span class="n">cinder</span> <span class="n">store</span>
<span class="n">cinder_catalog_info</span> <span class="o">=</span> <span class="n">volumev3</span><span class="p">::</span><span class="n">publicURL</span>
<span class="n">cinder_store_auth_address</span> <span class="o">=</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="o">/</span><span class="n">identity</span><span class="o">/</span><span class="n">v3</span>
<span class="n">cinder_store_user_name</span> <span class="o">=</span> <span class="n">glance</span>
<span class="n">cinder_store_password</span> <span class="o">=</span> <span class="n">admin</span>
<span class="n">cinder_store_project_name</span> <span class="o">=</span> <span class="n">service</span>
<span class="c1"># etc..</span>
</pre></div>
</div>
<p>Example 2: Upgrade from single cinder store to multiple cinder stores, if
<cite>default_volume_type</cite> is set in <cite>cinder.conf</cite> and <cite>cinder_volume_type</cite> is
also set in <cite>glance-api.conf</cite> then operator needs to create one store in
glance where <cite>cinder_volume_type</cite> is same as the old glance configuration:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span># cinder.conf
The glance administrator has to find out what the default volume-type is
in the cinder installation, so they need to discuss with either cinder
admin or cloud admin to identify default volume-type from cinder and then
explicitly configure that as the value of ``cinder_volume_type``.
</pre></div>
</div>
<p>Example config before upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># old configuration in glance</span>
<span class="p">[</span><span class="n">glance_store</span><span class="p">]</span>
<span class="n">stores</span> <span class="o">=</span> <span class="n">cinder</span><span class="p">,</span> <span class="n">file</span><span class="p">,</span> <span class="n">http</span>
<span class="n">default_store</span> <span class="o">=</span> <span class="n">cinder</span>
<span class="n">cinder_state_transition_timeout</span> <span class="o">=</span> <span class="mi">300</span>
<span class="n">rootwrap_config</span> <span class="o">=</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">glance</span><span class="o">/</span><span class="n">rootwrap</span><span class="o">.</span><span class="n">conf</span>
<span class="n">cinder_store_auth_address</span> <span class="o">=</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="o">/</span><span class="n">identity</span><span class="o">/</span><span class="n">v3</span>
<span class="n">cinder_store_user_name</span> <span class="o">=</span> <span class="n">glance</span>
<span class="n">cinder_store_password</span> <span class="o">=</span> <span class="n">admin</span>
<span class="n">cinder_store_project_name</span> <span class="o">=</span> <span class="n">service</span>
<span class="n">cinder_catalog_info</span> <span class="o">=</span> <span class="n">volumev3</span><span class="p">::</span><span class="n">publicURL</span>
<span class="n">cinder_volume_type</span> <span class="o">=</span> <span class="n">glance</span><span class="o">-</span><span class="n">old</span>
</pre></div>
</div>
<p>Example config after upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># new configuration in glance</span>
<span class="p">[</span><span class="n">DEFAULT</span><span class="p">]</span>
<span class="n">enabled_backends</span> <span class="o">=</span> <span class="n">old</span><span class="p">:</span><span class="n">cinder</span><span class="p">,</span> <span class="n">new</span><span class="p">:</span><span class="n">cinder</span>

<span class="p">[</span><span class="n">glance_store</span><span class="p">]</span>
<span class="n">default_backend</span> <span class="o">=</span> <span class="n">new</span>

<span class="p">[</span><span class="n">new</span><span class="p">]</span>
<span class="n">rootwrap_config</span> <span class="o">=</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">glance</span><span class="o">/</span><span class="n">rootwrap</span><span class="o">.</span><span class="n">conf</span>
<span class="n">cinder_volume_type</span> <span class="o">=</span> <span class="n">glance</span><span class="o">-</span><span class="n">new</span>
<span class="n">description</span> <span class="o">=</span> <span class="n">LVM</span> <span class="n">based</span> <span class="n">cinder</span> <span class="n">store</span>
<span class="n">cinder_catalog_info</span> <span class="o">=</span> <span class="n">volumev3</span><span class="p">::</span><span class="n">publicURL</span>
<span class="n">cinder_store_auth_address</span> <span class="o">=</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="o">/</span><span class="n">identity</span><span class="o">/</span><span class="n">v3</span>
<span class="n">cinder_store_user_name</span> <span class="o">=</span> <span class="n">glance</span>
<span class="n">cinder_store_password</span> <span class="o">=</span> <span class="n">admin</span>
<span class="n">cinder_store_project_name</span> <span class="o">=</span> <span class="n">service</span>
<span class="c1"># etc..</span>

<span class="p">[</span><span class="n">old</span><span class="p">]</span>
<span class="n">rootwrap_config</span> <span class="o">=</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">glance</span><span class="o">/</span><span class="n">rootwrap</span><span class="o">.</span><span class="n">conf</span>
<span class="n">cinder_volume_type</span> <span class="o">=</span> <span class="n">glance</span><span class="o">-</span><span class="n">old</span> <span class="c1"># as per old cinder.conf</span>
<span class="n">description</span> <span class="o">=</span> <span class="n">NFS</span> <span class="n">based</span> <span class="n">cinder</span> <span class="n">store</span>
<span class="n">cinder_catalog_info</span> <span class="o">=</span> <span class="n">volumev3</span><span class="p">::</span><span class="n">publicURL</span>
<span class="n">cinder_store_auth_address</span> <span class="o">=</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="o">/</span><span class="n">identity</span><span class="o">/</span><span class="n">v3</span>
<span class="n">cinder_store_user_name</span> <span class="o">=</span> <span class="n">glance</span>
<span class="n">cinder_store_password</span> <span class="o">=</span> <span class="n">admin</span>
<span class="n">cinder_store_project_name</span> <span class="o">=</span> <span class="n">service</span>
<span class="c1"># etc..</span>
</pre></div>
</div>
<p>Example 3: Upgrade from single cinder store to multiple cinder stores, if
<cite>default_volume_type</cite> is not set in <cite>cinder.conf</cite> neither <cite>cinder_volume_type</cite>
set in <cite>glance-api.conf</cite> then administrator needs to create one store in
glance to replicate exact old configuration:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span># cinder.conf
The glance administrator has to find out what the default volume-type is
in the cinder installation, so they need to discuss with either cinder
admin or cloud admin to identify default volume-type from cinder and then
explicitly configure that as the value of ``cinder_volume_type``.
</pre></div>
</div>
<p>Example config before upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># old configuration in glance</span>
<span class="p">[</span><span class="n">glance_store</span><span class="p">]</span>
<span class="n">stores</span> <span class="o">=</span> <span class="n">cinder</span><span class="p">,</span> <span class="n">file</span><span class="p">,</span> <span class="n">http</span>
<span class="n">default_store</span> <span class="o">=</span> <span class="n">cinder</span>
<span class="n">cinder_state_transition_timeout</span> <span class="o">=</span> <span class="mi">300</span>
<span class="n">cinder_store_auth_address</span> <span class="o">=</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="o">/</span><span class="n">identity</span><span class="o">/</span><span class="n">v3</span>
<span class="n">cinder_store_user_name</span> <span class="o">=</span> <span class="n">glance</span>
<span class="n">cinder_store_password</span> <span class="o">=</span> <span class="n">admin</span>
<span class="n">cinder_store_project_name</span> <span class="o">=</span> <span class="n">service</span>
<span class="n">rootwrap_config</span> <span class="o">=</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">glance</span><span class="o">/</span><span class="n">rootwrap</span><span class="o">.</span><span class="n">conf</span>
<span class="n">cinder_catalog_info</span> <span class="o">=</span> <span class="n">volumev3</span><span class="p">::</span><span class="n">publicURL</span>
</pre></div>
</div>
<p>Example config after upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># new configuration in glance</span>
<span class="p">[</span><span class="n">DEFAULT</span><span class="p">]</span>
<span class="n">enabled_backends</span> <span class="o">=</span> <span class="n">old</span><span class="p">:</span><span class="n">cinder</span><span class="p">,</span> <span class="n">new</span><span class="p">:</span><span class="n">cinder</span>

<span class="p">[</span><span class="n">glance_store</span><span class="p">]</span>
<span class="n">default_backend</span> <span class="o">=</span> <span class="n">new</span>

<span class="c1"># cinder store as per old (single store configuration)</span>
<span class="p">[</span><span class="n">old</span><span class="p">]</span>
<span class="n">rootwrap_config</span> <span class="o">=</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">glance</span><span class="o">/</span><span class="n">rootwrap</span><span class="o">.</span><span class="n">conf</span>
<span class="n">description</span> <span class="o">=</span> <span class="n">LVM</span> <span class="n">based</span> <span class="n">cinder</span> <span class="n">store</span>
<span class="n">cinder_catalog_info</span> <span class="o">=</span> <span class="n">volumev3</span><span class="p">::</span><span class="n">publicURL</span>
<span class="n">cinder_store_auth_address</span> <span class="o">=</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="o">/</span><span class="n">identity</span><span class="o">/</span><span class="n">v3</span>
<span class="n">cinder_store_user_name</span> <span class="o">=</span> <span class="n">glance</span>
<span class="n">cinder_store_password</span> <span class="o">=</span> <span class="n">admin</span>
<span class="n">cinder_store_project_name</span> <span class="o">=</span> <span class="n">service</span>
<span class="c1"># etc..</span>

<span class="p">[</span><span class="n">new</span><span class="p">]</span>
<span class="n">rootwrap_config</span> <span class="o">=</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">glance</span><span class="o">/</span><span class="n">rootwrap</span><span class="o">.</span><span class="n">conf</span>
<span class="n">cinder_volume_type</span> <span class="o">=</span> <span class="n">glance</span><span class="o">-</span><span class="n">new</span>
<span class="n">description</span> <span class="o">=</span> <span class="n">NFS</span> <span class="n">based</span> <span class="n">cinder</span> <span class="n">store</span>
<span class="n">cinder_catalog_info</span> <span class="o">=</span> <span class="n">volumev3</span><span class="p">::</span><span class="n">publicURL</span>
<span class="n">cinder_store_auth_address</span> <span class="o">=</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="o">/</span><span class="n">identity</span><span class="o">/</span><span class="n">v3</span>
<span class="n">cinder_store_user_name</span> <span class="o">=</span> <span class="n">glance</span>
<span class="n">cinder_store_password</span> <span class="o">=</span> <span class="n">admin</span>
<span class="n">cinder_store_project_name</span> <span class="o">=</span> <span class="n">service</span>
<span class="c1"># etc..</span>
</pre></div>
</div>
<p>Example 4: Upgrade from single cinder store to multiple cinder stores, if
<cite>default_volume_type</cite> is set in <cite>cinder.conf</cite> but <cite>cinder_volume_type</cite> is
not set in <cite>glance-api.conf</cite> then administrator needs to set
<cite>cinder_volume_type</cite> same as the <cite>default_backend</cite> set in <cite>cinder.conf</cite> to
one of the store:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span># cinder.conf
The glance administrator has to find out what the default volume-type is
in the cinder installation, so they need to discuss with either cinder
admin or cloud admin to identify default volume-type from cinder and then
explicitly configure that as the value of ``cinder_volume_type``.
</pre></div>
</div>
<p>Example config before upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># old configuration in glance</span>
<span class="p">[</span><span class="n">glance_store</span><span class="p">]</span>
<span class="n">stores</span> <span class="o">=</span> <span class="n">cinder</span><span class="p">,</span> <span class="n">file</span><span class="p">,</span> <span class="n">http</span>
<span class="n">default_store</span> <span class="o">=</span> <span class="n">cinder</span>
<span class="n">cinder_state_transition_timeout</span> <span class="o">=</span> <span class="mi">300</span>
<span class="n">rootwrap_config</span> <span class="o">=</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">glance</span><span class="o">/</span><span class="n">rootwrap</span><span class="o">.</span><span class="n">conf</span>
<span class="n">cinder_catalog_info</span> <span class="o">=</span> <span class="n">volumev3</span><span class="p">::</span><span class="n">publicURL</span>
<span class="n">cinder_store_auth_address</span> <span class="o">=</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="o">/</span><span class="n">identity</span><span class="o">/</span><span class="n">v3</span>
<span class="n">cinder_store_user_name</span> <span class="o">=</span> <span class="n">glance</span>
<span class="n">cinder_store_password</span> <span class="o">=</span> <span class="n">admin</span>
<span class="n">cinder_store_project_name</span> <span class="o">=</span> <span class="n">service</span>
</pre></div>
</div>
<p>Example config after upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># new configuration in glance</span>
<span class="p">[</span><span class="n">DEFAULT</span><span class="p">]</span>
<span class="n">enabled_backends</span> <span class="o">=</span> <span class="n">old</span><span class="p">:</span><span class="n">cinder</span><span class="p">,</span><span class="n">new</span><span class="p">:</span><span class="n">cinder</span>

<span class="p">[</span><span class="n">glance_store</span><span class="p">]</span>
<span class="n">default_backend</span> <span class="o">=</span> <span class="n">old</span>

<span class="p">[</span><span class="n">old</span><span class="p">]</span>
<span class="n">rootwrap_config</span> <span class="o">=</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">glance</span><span class="o">/</span><span class="n">rootwrap</span><span class="o">.</span><span class="n">conf</span>
<span class="n">cinder_volume_type</span> <span class="o">=</span> <span class="n">glance</span><span class="o">-</span><span class="n">old</span> <span class="c1"># as per old cinder.conf</span>
<span class="n">description</span> <span class="o">=</span> <span class="n">LVM</span> <span class="n">based</span> <span class="n">cinder</span> <span class="n">store</span>
<span class="n">cinder_catalog_info</span> <span class="o">=</span> <span class="n">volumev3</span><span class="p">::</span><span class="n">publicURL</span>
<span class="n">cinder_store_auth_address</span> <span class="o">=</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="o">/</span><span class="n">identity</span><span class="o">/</span><span class="n">v3</span>
<span class="n">cinder_store_user_name</span> <span class="o">=</span> <span class="n">glance</span>
<span class="n">cinder_store_password</span> <span class="o">=</span> <span class="n">admin</span>
<span class="n">cinder_store_project_name</span> <span class="o">=</span> <span class="n">service</span>
<span class="c1"># etc..</span>

<span class="p">[</span><span class="n">new</span><span class="p">]</span>
<span class="n">rootwrap_config</span> <span class="o">=</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">glance</span><span class="o">/</span><span class="n">rootwrap</span><span class="o">.</span><span class="n">conf</span>
<span class="n">cinder_volume_type</span> <span class="o">=</span> <span class="n">glance</span><span class="o">-</span><span class="n">new</span>
<span class="n">description</span> <span class="o">=</span> <span class="n">NFS</span> <span class="n">based</span> <span class="n">cinder</span> <span class="n">store</span>
<span class="n">cinder_catalog_info</span> <span class="o">=</span> <span class="n">volumev3</span><span class="p">::</span><span class="n">publicURL</span>
<span class="n">cinder_store_auth_address</span> <span class="o">=</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="o">/</span><span class="n">identity</span><span class="o">/</span><span class="n">v3</span>
<span class="n">cinder_store_user_name</span> <span class="o">=</span> <span class="n">glance</span>
<span class="n">cinder_store_password</span> <span class="o">=</span> <span class="n">admin</span>
<span class="n">cinder_store_project_name</span> <span class="o">=</span> <span class="n">service</span>
<span class="c1"># etc..</span>
</pre></div>
</div>
<p>Example 5: Upgrade from single cinder store to multiple cinder stores, if
properties like <code class="docutils literal notranslate"><span class="pre">cinder_store_user_name</span></code>, <code class="docutils literal notranslate"><span class="pre">cinder_store_password</span></code>,
<code class="docutils literal notranslate"><span class="pre">cinder_store_project_name</span></code> and <code class="docutils literal notranslate"><span class="pre">cinder_store_auth_address</span></code>, are not
set in single store:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># old configuration in glance</span>
<span class="p">[</span><span class="n">glance_store</span><span class="p">]</span>
<span class="n">stores</span> <span class="o">=</span> <span class="n">cinder</span><span class="p">,</span> <span class="n">file</span><span class="p">,</span> <span class="n">http</span>
<span class="n">default_store</span> <span class="o">=</span> <span class="n">cinder</span>
<span class="n">cinder_state_transition_timeout</span> <span class="o">=</span> <span class="mi">300</span>
<span class="n">rootwrap_config</span> <span class="o">=</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">glance</span><span class="o">/</span><span class="n">rootwrap</span><span class="o">.</span><span class="n">conf</span>
</pre></div>
</div>
<p>Example config after upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># new configuration in glance</span>
<span class="p">[</span><span class="n">DEFAULT</span><span class="p">]</span>
<span class="n">enabled_backends</span> <span class="o">=</span> <span class="n">new</span><span class="p">:</span><span class="n">cinder</span>

<span class="p">[</span><span class="n">glance_store</span><span class="p">]</span>
<span class="n">default_backend</span> <span class="o">=</span> <span class="n">new</span>

<span class="p">[</span><span class="n">new</span><span class="p">]</span>
<span class="n">rootwrap_config</span> <span class="o">=</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">glance</span><span class="o">/</span><span class="n">rootwrap</span><span class="o">.</span><span class="n">conf</span>
<span class="n">cinder_volume_type</span> <span class="o">=</span> <span class="n">glance</span><span class="o">-</span><span class="n">new</span>
<span class="n">description</span> <span class="o">=</span> <span class="n">NFS</span> <span class="n">based</span> <span class="n">cinder</span> <span class="n">store</span>
<span class="n">cinder_catalog_info</span> <span class="o">=</span> <span class="n">volumev3</span><span class="p">::</span><span class="n">publicURL</span>
<span class="n">cinder_store_auth_address</span> <span class="o">=</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="o">/</span><span class="n">identity</span><span class="o">/</span><span class="n">v3</span>
<span class="n">cinder_store_user_name</span> <span class="o">=</span> <span class="n">glance</span>
<span class="n">cinder_store_password</span> <span class="o">=</span> <span class="n">admin</span>
<span class="n">cinder_store_project_name</span> <span class="o">=</span> <span class="n">service</span>
<span class="c1"># etc..</span>
</pre></div>
</div>
<p>Since the cinder specific properties were not set in single store, the
Image-Volumes would exist in user projects which needs to be transferred.
After upgrading to multi store, you need to make sure all the
Image-Volumes are transferred to the <code class="docutils literal notranslate"><span class="pre">service</span></code> project.</p>
<p>Procedure:</p>
<p>1. Login to the user and project owning the Image-Volume and create a volume
transfer request.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">openstack volume transfer request create &lt;Image-Volume-ID&gt;</span>
</pre></div>
</div>
<p>Note down the <code class="docutils literal notranslate"><span class="pre">id</span></code> and <code class="docutils literal notranslate"><span class="pre">auth_key</span></code> as they will be used
when accepting the transfer.</p>
<ol class="arabic simple" start="2">
<li><p>List the transfer request to verify the transfer was created successfully.</p></li>
</ol>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">openstack volume transfer request list</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>Login to the glance user and service project and accept the transfer.</p></li>
</ol>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">openstack volume transfer request accept transferID authKey</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p>List the volumes to see if the Image-Volume was transferred successfully.</p></li>
</ol>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">openstack volume list --name &lt;Image-Volume-Name&gt;</span>
</pre></div>
</div>
<p>Once all the Image-Volumes are migrated to the service project, you can
list or show the images and it will update the location from old format
to the new format.</p>
<div class="admonition warning">
<p class="admonition-title"><div class="fa fa-fw fa-exclamation-triangle">&nbsp;</div>Warning</p>
<p>It is important to note that when upgrading from single store to
multiple stores, the values for cinder store specific configuration
parameters should remain the same before and after the upgrade.</p>
<p>Example: Suppose you have the following credentials set in single store
configuration:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">glance_store</span><span class="p">]</span>
<span class="n">stores</span> <span class="o">=</span> <span class="n">cinder</span><span class="p">,</span> <span class="n">file</span><span class="p">,</span> <span class="n">http</span>
<span class="n">default_store</span> <span class="o">=</span> <span class="n">cinder</span>
<span class="n">cinder_state_transition_timeout</span> <span class="o">=</span> <span class="mi">300</span>
<span class="n">rootwrap_config</span> <span class="o">=</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">glance</span><span class="o">/</span><span class="n">rootwrap</span><span class="o">.</span><span class="n">conf</span>
<span class="n">cinder_catalog_info</span> <span class="o">=</span> <span class="n">volumev3</span><span class="p">::</span><span class="n">publicURL</span>
<span class="n">cinder_store_auth_address</span> <span class="o">=</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="o">/</span><span class="n">identity</span><span class="o">/</span><span class="n">v3</span>
<span class="n">cinder_store_user_name</span> <span class="o">=</span> <span class="n">glance</span>
<span class="n">cinder_store_password</span> <span class="o">=</span> <span class="n">admin</span>
<span class="n">cinder_store_project_name</span> <span class="o">=</span> <span class="n">service</span>
</pre></div>
</div>
<p>Then after the upgrade, the cinder specific paramter values for
<code class="docutils literal notranslate"><span class="pre">cinder_store_auth_address</span></code>, <code class="docutils literal notranslate"><span class="pre">cinder_store_user_name</span></code>,
<code class="docutils literal notranslate"><span class="pre">cinder_store_password</span></code> and <code class="docutils literal notranslate"><span class="pre">cinder_store_project_name</span></code>
should be same:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">DEFAULT</span><span class="p">]</span>
<span class="n">enabled_backends</span> <span class="o">=</span> <span class="n">new</span><span class="p">:</span><span class="n">cinder</span>

<span class="p">[</span><span class="n">glance_store</span><span class="p">]</span>
<span class="n">default_backend</span> <span class="o">=</span> <span class="n">new</span>

<span class="p">[</span><span class="n">new</span><span class="p">]</span>
<span class="n">rootwrap_config</span> <span class="o">=</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">glance</span><span class="o">/</span><span class="n">rootwrap</span><span class="o">.</span><span class="n">conf</span>
<span class="n">cinder_volume_type</span> <span class="o">=</span> <span class="n">glance</span><span class="o">-</span><span class="n">new</span>
<span class="n">description</span> <span class="o">=</span> <span class="n">NFS</span> <span class="n">based</span> <span class="n">cinder</span> <span class="n">store</span>
<span class="n">cinder_catalog_info</span> <span class="o">=</span> <span class="n">volumev3</span><span class="p">::</span><span class="n">publicURL</span>
<span class="n">cinder_store_auth_address</span> <span class="o">=</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="o">/</span><span class="n">identity</span><span class="o">/</span><span class="n">v3</span>
<span class="n">cinder_store_user_name</span> <span class="o">=</span> <span class="n">glance</span>
<span class="n">cinder_store_password</span> <span class="o">=</span> <span class="n">admin</span>
<span class="n">cinder_store_project_name</span> <span class="o">=</span> <span class="n">service</span>
</pre></div>
</div>
</div>
<p>While upgrading from single cinder stores to multiple single stores, location
URLs for legacy images will be changed from <code class="docutils literal notranslate"><span class="pre">cinder://volume-id</span></code> to
<code class="docutils literal notranslate"><span class="pre">cinder://store-name/volume-id</span></code>.</p>
<p><strong>Note</strong>: After upgrade from single cinder store to use multiple cinder
stores the first <code class="docutils literal notranslate"><span class="pre">image-list</span></code> or first <code class="docutils literal notranslate"><span class="pre">GET</span></code> or <code class="docutils literal notranslate"><span class="pre">image-show</span></code> call for
image will take additional time as we will perform the lazy loading
operation to update legacy image location url to use new image location urls.
Subsequent <code class="docutils literal notranslate"><span class="pre">GET</span></code> or <code class="docutils literal notranslate"><span class="pre">image-list</span></code> or <code class="docutils literal notranslate"><span class="pre">image-show</span></code> calls will perform as
they were performing earlier.</p>
</section>
<section id="configuring-the-vmware-storage-backend">
<h3>Configuring the VMware Storage Backend<a class="headerlink" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#configuring-the-vmware-storage-backend" title="Link to this heading">¶</a></h3>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">vmware_server_host=ADDRESS</span></code></dt><dd><p>Required when using the VMware storage backend.</p>
<p>Can only be specified in configuration files.</p>
<p>Sets the address of the ESX/ESXi or vCenter Server target system.
The address can contain an IP (<code class="docutils literal notranslate"><span class="pre">127.0.0.1</span></code>), an IP and port
(<code class="docutils literal notranslate"><span class="pre">127.0.0.1:443</span></code>), a DNS name (<code class="docutils literal notranslate"><span class="pre">www.my-domain.com</span></code>) or DNS and port.</p>
<p><cite>This option is specific to the VMware storage backend.</cite></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">vmware_server_username=USERNAME</span></code></dt><dd><p>Required when using the VMware storage backend.</p>
<p>Can only be specified in configuration files.</p>
<p>Username for authenticating with VMware ESX/ESXi or vCenter Server.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">vmware_server_password=PASSWORD</span></code></dt><dd><p>Required when using the VMware storage backend.</p>
<p>Can only be specified in configuration files.</p>
<p>Password for authenticating with VMware ESX/ESXi or vCenter Server.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">vmware_datastores</span></code></dt><dd><p>Required when using the VMware storage backend.</p>
<p>This option can only be specified in configuration file and is specific
to the VMware storage backend.</p>
<p>vmware_datastores allows administrators to configure multiple datastores to
save glance image in the VMware store backend. The required format for the
option is: &lt;datacenter_path&gt;:&lt;datastore_name&gt;:&lt;optional_weight&gt;.</p>
<p>where datacenter_path is the inventory path to the datacenter where the
datastore is located. An optional weight can be given to specify the
priority.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vmware_datastores</span> <span class="o">=</span> <span class="n">datacenter1</span><span class="p">:</span><span class="n">datastore1</span>
<span class="n">vmware_datastores</span> <span class="o">=</span> <span class="n">dc_folder</span><span class="o">/</span><span class="n">datacenter2</span><span class="p">:</span><span class="n">datastore2</span><span class="p">:</span><span class="mi">100</span>
<span class="n">vmware_datastores</span> <span class="o">=</span> <span class="n">datacenter1</span><span class="p">:</span><span class="n">datastore3</span><span class="p">:</span><span class="mi">200</span>
</pre></div>
</div>
<p><strong>NOTE</strong>:</p>
<ul class="simple">
<li><p>This option can be specified multiple times to specify multiple datastores.</p></li>
<li><p>Either vmware_datastore_name or vmware_datastores option must be specified
in glance-api.conf</p></li>
<li><p>Datastore with weight 200 has precedence over datastore with weight 100.</p></li>
<li><p>If no weight is specified, default weight ‘0’ is associated with it.</p></li>
<li><p>If two datastores have same weight, the datastore with maximum free space
will be chosen to store the image.</p></li>
<li><p>If the datacenter path or datastore name contains a colon (:) symbol, it
must be escaped with a backslash.</p></li>
</ul>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">vmware_api_retry_count=TIMES</span></code></dt><dd><p>Optional. Default: <code class="docutils literal notranslate"><span class="pre">10</span></code></p>
<p>Can only be specified in configuration files.</p>
<p>The number of times VMware ESX/VC server API must be
retried upon connection related issues.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">vmware_task_poll_interval=SECONDS</span></code></dt><dd><p>Optional. Default: <code class="docutils literal notranslate"><span class="pre">5</span></code></p>
<p>Can only be specified in configuration files.</p>
<p>The interval used for polling remote tasks invoked on VMware ESX/VC server.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">vmware_store_image_dir</span></code></dt><dd><p>Optional. Default: <code class="docutils literal notranslate"><span class="pre">/openstack_glance</span></code></p>
<p>Can only be specified in configuration files.</p>
<p>The path to access the folder where the images will be stored
in the datastore.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">vmware_api_insecure=ON_OFF</span></code></dt><dd><p>Optional. Default: <code class="docutils literal notranslate"><span class="pre">False</span></code></p>
<p>Can only be specified in configuration files.</p>
<p>Allow to perform insecure SSL requests to ESX/VC server.</p>
</dd>
</dl>
</section>
<section id="configuring-the-s3-storage-backend">
<h3>Configuring the S3 Storage Backend<a class="headerlink" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#configuring-the-s3-storage-backend" title="Link to this heading">¶</a></h3>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">s3_store_host</span></code></dt><dd><p>Can only be specified in configuration files.</p>
<p>The host where the S3 server is listening. This option can contain a DNS name
(e.g. s3.amazonaws.com, my-object-storage.com) or an IP address (127.0.0.1).</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">s3_store_host</span> <span class="o">=</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">s3</span><span class="o">-</span><span class="n">ap</span><span class="o">-</span><span class="n">northeast</span><span class="o">-</span><span class="mf">1.</span><span class="n">amazonaws</span><span class="o">.</span><span class="n">com</span>
<span class="n">s3_store_host</span> <span class="o">=</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">s3</span><span class="o">-</span><span class="n">ap</span><span class="o">-</span><span class="n">northeast</span><span class="o">-</span><span class="mf">1.</span><span class="n">amazonaws</span><span class="o">.</span><span class="n">com</span>
<span class="n">s3_store_host</span> <span class="o">=</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">my</span><span class="o">-</span><span class="nb">object</span><span class="o">-</span><span class="n">storage</span><span class="o">.</span><span class="n">com</span>
<span class="n">s3_store_host</span> <span class="o">=</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">my</span><span class="o">-</span><span class="nb">object</span><span class="o">-</span><span class="n">storage</span><span class="o">.</span><span class="n">com</span><span class="p">:</span><span class="mi">9000</span>
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">s3_store_access_key</span></code></dt><dd><p>Can only be specified in configuration files.</p>
<p>Access Key for authenticating with the Amazon S3 or S3 compatible storage
server.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">s3_store_secret_key</span></code></dt><dd><p>Can only be specified in configuration files.</p>
<p>Secret Key for authenticating with the Amazon S3 or S3 compatible storage
server.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">s3_store_bucket</span></code></dt><dd><p>Can only be specified in configuration files.</p>
<p>Bucket name where the glance images will be stored in the S3.
If <code class="docutils literal notranslate"><span class="pre">s3_store_create_bucket_on_put</span></code> is set to true, it will be created
automatically even if the bucket does not exist.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">s3_store_create_bucket_on_put</span></code></dt><dd><p>Optional. Default: <code class="docutils literal notranslate"><span class="pre">False</span></code></p>
<p>Can only be specified in configuration files.</p>
<p>Determine whether S3 should create a new bucket. This option takes boolean
value to indicate whether or not Glance should create new bucket to S3 if it
does not exist.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">s3_store_bucket_url_format</span></code></dt><dd><p>Optional. Default: <code class="docutils literal notranslate"><span class="pre">auto</span></code></p>
<p>Can only be specified in configuration files.</p>
<p>This option takes access model that is used to specify the address of an
object in an S3 bucket. You can set the value from <code class="docutils literal notranslate"><span class="pre">auto</span></code>, <code class="docutils literal notranslate"><span class="pre">virtual</span></code> or
<code class="docutils literal notranslate"><span class="pre">path</span></code>.</p>
<p><strong>NOTE</strong>:</p>
<ul class="simple">
<li><p>In <code class="docutils literal notranslate"><span class="pre">path</span></code>-style, the endpoint for the object looks like <code class="docutils literal notranslate"><span class="pre">https://s3.amazonaws.com/bucket/example.img</span></code>.</p></li>
<li><p>In <code class="docutils literal notranslate"><span class="pre">virtual</span></code>-style, the endpoint for the object looks like <code class="docutils literal notranslate"><span class="pre">https://bucket.s3.amazonaws.com/example.img</span></code>.</p></li>
<li><p>If you do not follow the DNS naming convention in the bucket name, you can
get objects in the path style, but not in the virtual style.</p></li>
</ul>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">s3_store_large_object_size</span></code></dt><dd><p>Optional. Default: <code class="docutils literal notranslate"><span class="pre">100</span></code></p>
<p>Can only be specified in configuration files.</p>
<p>What size, in MB, should S3 start chunking image files and do a multipart
upload in S3.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">s3_store_large_object_chunk_size</span></code></dt><dd><p>Optional. Default: <code class="docutils literal notranslate"><span class="pre">10</span></code></p>
<p>Can only be specified in configuration files.</p>
<p>What multipart upload part size, in MB, should S3 use when uploading parts.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">s3_store_thread_pools</span></code></dt><dd><p>Optional. Default: <code class="docutils literal notranslate"><span class="pre">10</span></code></p>
<p>Can only be specified in configuration files.</p>
<p>The number of thread pools to perform a multipart upload in S3.</p>
</dd>
</dl>
</section>
<section id="configuring-the-storage-endpoint">
<h3>Configuring the Storage Endpoint<a class="headerlink" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#configuring-the-storage-endpoint" title="Link to this heading">¶</a></h3>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">swift_store_endpoint=URL</span></code></dt><dd><p>Optional. Default: <code class="docutils literal notranslate"><span class="pre">None</span></code></p>
<p>Can only be specified in configuration files.</p>
<p>Overrides the storage URL returned by auth. The URL should include the
path up to and excluding the container. The location of an object is
obtained by appending the container and object to the configured URL.
e.g. <code class="docutils literal notranslate"><span class="pre">https://www.my-domain.com/v1/path_up_to_container</span></code></p>
</dd>
</dl>
</section>
</section>
<section id="configuring-glance-image-size-limit">
<h2>Configuring Glance Image Size Limit<a class="headerlink" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#configuring-glance-image-size-limit" title="Link to this heading">¶</a></h2>
<p>The following configuration option is specified in the
<code class="docutils literal notranslate"><span class="pre">glance-api.conf</span></code> configuration file in the section <code class="docutils literal notranslate"><span class="pre">[DEFAULT]</span></code>.</p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">image_size_cap=SIZE</span></code></dt><dd><p>Optional. Default: <code class="docutils literal notranslate"><span class="pre">1099511627776</span></code> (1 TB)</p>
<p>Maximum image size, in bytes, which can be uploaded through
the Glance API server.</p>
<p><strong>IMPORTANT NOTE</strong>: this value should only be increased after careful
consideration and must be set to a value under 8 EB (9223372036854775808).</p>
</dd>
</dl>
</section>
<section id="configuring-glance-user-storage-quota">
<h2>Configuring Glance User Storage Quota<a class="headerlink" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#configuring-glance-user-storage-quota" title="Link to this heading">¶</a></h2>
<p>The following configuration option is specified in the
<code class="docutils literal notranslate"><span class="pre">glance-api.conf</span></code> configuration file in the section <code class="docutils literal notranslate"><span class="pre">[DEFAULT]</span></code>.</p>
<div class="admonition note">
<p class="admonition-title"><div class="fa fa-fw fa-check-circle">&nbsp;</div>Note</p>
<p>As of the Xena release, Glance supports <a class="reference internal" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#config-per-tenant-quotas"><span class="std std-ref">per-tenant</span></a>
quotas with more granularity than the global limit provided by this
option. You may want to enable per-tenant quotas and leave this
unset.</p>
</div>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">user_storage_quota</span></code></dt><dd><p>Optional. Default: 0 (Unlimited).</p>
<p>This value specifies the maximum amount of storage that each user can use
across all storage systems. Optionally unit can be specified for the value.
Values are accepted in B, KB, MB, GB or TB which are for Bytes, KiloBytes,
MegaBytes, GigaBytes and TeraBytes respectively. Default unit is Bytes.</p>
<dl class="simple">
<dt>Example values would be,</dt><dd><p>user_storage_quota=20GB</p>
</dd>
</dl>
</dd>
</dl>
</section>
<section id="configuring-glance-per-tenant-quotas">
<span id="config-per-tenant-quotas"></span><h2>Configuring Glance Per-Tenant Quotas<a class="headerlink" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#configuring-glance-per-tenant-quotas" title="Link to this heading">¶</a></h2>
<p>Glance can utilize per-tenant resource limits set in Keystone to
enforce quotas on users. These limits must be registered with defaults
in Keystone, with optional per-tenant overrides, prior to enabling
them in Glance. To instruct glance to use limits in Keystone, set
<code class="docutils literal notranslate"><span class="pre">[DEFAULT]/use_keystone_limits=True</span></code> in <code class="docutils literal notranslate"><span class="pre">glance-api.conf</span></code>.</p>
</section>
<section id="configuring-the-image-cache">
<h2>Configuring the Image Cache<a class="headerlink" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#configuring-the-image-cache" title="Link to this heading">¶</a></h2>
<p>Glance API servers can be configured to have a local image cache. Caching of
image files is transparent and happens using a piece of middleware that can
optionally be placed in the server application pipeline.</p>
<p>This pipeline is configured in the PasteDeploy configuration file,
&lt;component&gt;-paste.ini. You should not generally have to edit this file
directly, as it ships with ready-made pipelines for all common deployment
flavors.</p>
<section id="enabling-the-image-cache-middleware">
<h3>Enabling the Image Cache Middleware<a class="headerlink" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#enabling-the-image-cache-middleware" title="Link to this heading">¶</a></h3>
<p>To enable the image cache middleware, the cache middleware must occur in
the application pipeline <strong>after</strong> the appropriate context middleware.</p>
<p>The cache middleware should be in your <code class="docutils literal notranslate"><span class="pre">glance-api-paste.ini</span></code> in a section
titled <code class="docutils literal notranslate"><span class="pre">[filter:cache]</span></code>. It should look like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="nb">filter</span><span class="p">:</span><span class="n">cache</span><span class="p">]</span>
<span class="n">paste</span><span class="o">.</span><span class="n">filter_factory</span> <span class="o">=</span> <span class="n">glance</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">middleware</span><span class="o">.</span><span class="n">cache</span><span class="p">:</span><span class="n">CacheFilter</span><span class="o">.</span><span class="n">factory</span>
</pre></div>
</div>
<p>A ready-made application pipeline including this filter is defined in
the <code class="docutils literal notranslate"><span class="pre">glance-api-paste.ini</span></code> file, looking like so:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">pipeline</span><span class="p">:</span><span class="n">glance</span><span class="o">-</span><span class="n">api</span><span class="o">-</span><span class="n">caching</span><span class="p">]</span>
<span class="n">pipeline</span> <span class="o">=</span> <span class="n">versionnegotiation</span> <span class="n">context</span> <span class="n">cache</span> <span class="n">apiv1app</span>
</pre></div>
</div>
<p>To enable the above application pipeline, in your main <code class="docutils literal notranslate"><span class="pre">glance-api.conf</span></code>
configuration file, select the appropriate deployment flavor like so:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">paste_deploy</span><span class="p">]</span>
<span class="n">flavor</span> <span class="o">=</span> <span class="n">caching</span>
</pre></div>
</div>
</section>
<section id="enabling-the-image-cache-management-middleware-deprecated">
<h3>Enabling the Image Cache Management Middleware (DEPRECATED)<a class="headerlink" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#enabling-the-image-cache-management-middleware-deprecated" title="Link to this heading">¶</a></h3>
<p>There is an optional <code class="docutils literal notranslate"><span class="pre">cachemanage</span></code> middleware that allows you to
directly interact with cache images. Use this flavor in place of the
<code class="docutils literal notranslate"><span class="pre">cache</span></code> flavor in your API configuration file. There are three types you
can chose: <code class="docutils literal notranslate"><span class="pre">cachemanagement</span></code>, <code class="docutils literal notranslate"><span class="pre">keystone+cachemanagement</span></code> and
<code class="docutils literal notranslate"><span class="pre">trusted-auth+cachemanagement</span></code>.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">paste_deploy</span><span class="p">]</span>
<span class="n">flavor</span> <span class="o">=</span> <span class="n">keystone</span><span class="o">+</span><span class="n">cachemanagement</span>
</pre></div>
</div>
<p>The new cache management endpoints were introduced in Images API v. 2.13.
If cache middleware is configured the new endpoints will be active and
there is no need to use the cachemanagement middleware unless the old
<cite>glance-cache-manage</cite> tooling is desired to be still used.</p>
</section>
<section id="configuration-options-affecting-the-image-cache">
<h3>Configuration Options Affecting the Image Cache<a class="headerlink" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#configuration-options-affecting-the-image-cache" title="Link to this heading">¶</a></h3>
<div class="admonition note">
<p class="admonition-title"><div class="fa fa-fw fa-check-circle">&nbsp;</div>Note</p>
<p>These configuration options must be set in both the glance-cache
and glance-api configuration files.</p>
</div>
<p>One main configuration file option affects the image cache.</p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">image_cache_dir=PATH</span></code></dt><dd><p>Required when image cache middleware is enabled.</p>
<p>Default: <code class="docutils literal notranslate"><span class="pre">/var/lib/glance/image-cache</span></code></p>
<p>This is the base directory the image cache can write files to.
Make sure the directory is writable by the user running the
<code class="docutils literal notranslate"><span class="pre">glance-api</span></code> server</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">image_cache_driver=DRIVER</span></code></dt><dd><p>Optional. Choice of <code class="docutils literal notranslate"><span class="pre">sqlite</span></code>, <code class="docutils literal notranslate"><span class="pre">xattr</span></code> or <code class="docutils literal notranslate"><span class="pre">centralized_db</span></code></p>
<p>Default: <code class="docutils literal notranslate"><span class="pre">centralized_db</span></code></p>
<p>The default <code class="docutils literal notranslate"><span class="pre">centralized_db</span></code> cache driver has no special
dependencies, other than <code class="docutils literal notranslate"><span class="pre">worker_self_reference_url</span></code> which needs
to be configured to store the reference of node in the database.
Earlier cache database used to be independent for each glance api
service, now with <code class="docutils literal notranslate"><span class="pre">centralized_db</span></code> cache driver it stores
information about the cached files at one place which is in
a central database. Old records from SQLite database will
be <a class="reference internal" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#sqlite-to-centralized-db-migration"><span class="std std-ref">migrated</span></a> to
central database on service restart during upgrade process.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">sqlite</span></code> cache driver has no special dependencies, other
than the <code class="docutils literal notranslate"><span class="pre">python-sqlite3</span></code> library, which is installed on virtually
all operating systems with modern versions of Python. It stores
information about the cached files in a SQLite database.</p>
<p><strong>NOTE</strong>
In Caracal release <code class="docutils literal notranslate"><span class="pre">sqlite</span></code> cache driver has been deprecated and will
be removed in <code class="docutils literal notranslate"><span class="pre">F</span></code> development cycle.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">xattr</span></code> cache driver required the <code class="docutils literal notranslate"><span class="pre">python-xattr&gt;=0.6.0</span></code> library
and requires that the filesystem containing <code class="docutils literal notranslate"><span class="pre">image_cache_dir</span></code> have
access times tracked for all files (in other words, the noatime option
CANNOT be set for that filesystem). In addition, <code class="docutils literal notranslate"><span class="pre">user_xattr</span></code> must be
set on the filesystem’s description line in fstab.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">image_cache_sqlite_db=DB_FILE</span></code></dt><dd><p>Optional.</p>
<p>Default: <code class="docutils literal notranslate"><span class="pre">cache.db</span></code></p>
<p>When using the <code class="docutils literal notranslate"><span class="pre">sqlite</span></code> cache driver, you can set the name of the database
that will be used to store the cached images information. The database
is always contained in the <code class="docutils literal notranslate"><span class="pre">image_cache_dir</span></code>.</p>
<p><strong>NOTE</strong>
In Caracal release <code class="docutils literal notranslate"><span class="pre">image_cache_sqlite_db</span></code> option has been deprecated
and will be removed in <code class="docutils literal notranslate"><span class="pre">F</span></code> development cycle.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">image_cache_max_size=SIZE</span></code></dt><dd><p>Optional.</p>
<p>Default: <code class="docutils literal notranslate"><span class="pre">10737418240</span></code> (10 GB)</p>
<p>Size, in bytes, that the image cache should be constrained to. Images files
are cached automatically in the local image cache, even if the writing of
that image file would put the total cache size over this size. The
<code class="docutils literal notranslate"><span class="pre">glance-cache-pruner</span></code> executable is what prunes the image cache to be equal
to or less than this value. The <code class="docutils literal notranslate"><span class="pre">glance-cache-pruner</span></code> executable is
designed to be run via cron on a regular basis. See more about this
executable in <a class="reference internal" href="https://docs.openstack.org/glance/latest/admin/cache.html#image-cache"><span class="std std-ref">Controlling the Growth of the Image Cache</span></a></p>
</dd>
</dl>
</section>
</section>
<section id="migrating-records-from-sqlite-to-central-database">
<span id="sqlite-to-centralized-db-migration"></span><h2>Migrating records from SQLite to Central database<a class="headerlink" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#migrating-records-from-sqlite-to-central-database" title="Link to this heading">¶</a></h2>
<p>In case of upgrades/updates we need to deal with migrating existing records
from SQLite database to central database. This operation will be performed
one time during service startup. If SQLite database file, configured using
<code class="docutils literal notranslate"><span class="pre">image_cache_sqlite_db</span></code> configuration option (default <code class="docutils literal notranslate"><span class="pre">cache.db</span></code>) is
present at service start and <code class="docutils literal notranslate"><span class="pre">image_cache_driver</span></code> is not set to
<code class="docutils literal notranslate"><span class="pre">centralized_db</span></code> then we will read records from SQLite database and
insert those in newly created <code class="docutils literal notranslate"><span class="pre">cached_images</span></code> table in central database.
Once all records are migrated we will clear the SQLite database table
and keep the SQLite database file as it is (to be deleted by
administrator/operator later if required). Important point here is once
deployer chooses to use <code class="docutils literal notranslate"><span class="pre">centralized_db</span></code> and we migrate their records out
of SQLite database to central database, then we will not migrate them back
if deployer wants to revert back to <code class="docutils literal notranslate"><span class="pre">sqlite</span></code> driver.</p>
</section>
<section id="configuring-notifications">
<h2>Configuring Notifications<a class="headerlink" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#configuring-notifications" title="Link to this heading">¶</a></h2>
<p>Glance can optionally generate notifications to be logged or sent to a message
queue. The configuration options are specified in the <code class="docutils literal notranslate"><span class="pre">glance-api.conf</span></code>
configuration file.</p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">[oslo_messaging_notifications]/driver</span></code></dt><dd><p>Optional. Default: <code class="docutils literal notranslate"><span class="pre">noop</span></code></p>
<p>Sets the notification driver used by oslo.messaging. Options include
<code class="docutils literal notranslate"><span class="pre">messaging</span></code>, <code class="docutils literal notranslate"><span class="pre">messagingv2</span></code>, <code class="docutils literal notranslate"><span class="pre">log</span></code> and <code class="docutils literal notranslate"><span class="pre">routing</span></code>.</p>
<p><strong>NOTE</strong>
In M release, the``[DEFAULT]/notification_driver`` option has been
deprecated in favor of <code class="docutils literal notranslate"><span class="pre">[oslo_messaging_notifications]/driver</span></code>.</p>
<p>For more information see <a class="reference internal" href="https://docs.openstack.org/glance/latest/admin/notifications.html#notifications"><span class="std std-ref">Glance notifications</span></a> and
<a class="reference external" href="https://docs.openstack.org/oslo.messaging/latest/">oslo.messaging</a>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">[DEFAULT]/disabled_notifications</span></code></dt><dd><p>Optional. Default: <code class="docutils literal notranslate"><span class="pre">[]</span></code></p>
<p>List of disabled notifications. A notification can be given either as a
notification type to disable a single event, or as a notification group
prefix to disable all events within a group.</p>
<p>Example: if this config option is set to
[“image.create”, “metadef_namespace”], then “image.create” notification will
not be sent after image is created and none of the notifications
for metadefinition namespaces will be sent.</p>
</dd>
</dl>
</section>
<section id="configuring-glance-property-protections">
<h2>Configuring Glance Property Protections<a class="headerlink" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#configuring-glance-property-protections" title="Link to this heading">¶</a></h2>
<p>Access to image meta properties may be configured using a
<a class="reference internal" href="https://docs.openstack.org/glance/latest/admin/property-protections.html#property-protections"><span class="std std-ref">Property Protections Configuration file</span></a>.  The
location for this file can be specified in the <code class="docutils literal notranslate"><span class="pre">glance-api.conf</span></code>
configuration file in the section <code class="docutils literal notranslate"><span class="pre">[DEFAULT]</span></code>. <strong>If an incorrect value is
specified, glance API service will not start.</strong></p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">property_protection_file=PATH</span></code></dt><dd><p>Optional. Default: not enabled.</p>
<p>If property_protection_file is set, the file may use either roles or policies
to specify property protections.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">property_protection_rule_format=&lt;roles|policies&gt;</span></code></dt><dd><p>Optional. Default: <code class="docutils literal notranslate"><span class="pre">roles</span></code>.</p>
</dd>
</dl>
</section>
<section id="configuring-glance-apis">
<h2>Configuring Glance APIs<a class="headerlink" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#configuring-glance-apis" title="Link to this heading">¶</a></h2>
<p>The glance-api service implements versions 2 of the OpenStack Images API.
Currently there are no options to enable or disable specific API versions.</p>
</section>
<section id="configuring-glance-tasks">
<h2>Configuring Glance Tasks<a class="headerlink" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#configuring-glance-tasks" title="Link to this heading">¶</a></h2>
<p>Glance Tasks are implemented only for version 2 of the OpenStack Images API.</p>
<p>The config value <code class="docutils literal notranslate"><span class="pre">task_time_to_live</span></code> is used to determine how long a task
would be visible to the user after transitioning to either the <code class="docutils literal notranslate"><span class="pre">success</span></code> or
the <code class="docutils literal notranslate"><span class="pre">failure</span></code> state.</p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">task_time_to_live=&lt;Time_in_hours&gt;</span></code></dt><dd><p>Optional. Default: <code class="docutils literal notranslate"><span class="pre">48</span></code></p>
<p>The config value <code class="docutils literal notranslate"><span class="pre">task_executor</span></code> is used to determine which executor
should be used by the Glance service to process the task. The currently
available implementation is: <code class="docutils literal notranslate"><span class="pre">taskflow</span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">task_executor=&lt;executor_type&gt;</span></code></dt><dd><p>Optional. Default: <code class="docutils literal notranslate"><span class="pre">taskflow</span></code></p>
<p>The <code class="docutils literal notranslate"><span class="pre">taskflow</span></code> engine has its own set of configuration options,
under the <code class="docutils literal notranslate"><span class="pre">taskflow_executor</span></code> section, that can be tuned to improve
the task execution process. Among the available options, you may find
<code class="docutils literal notranslate"><span class="pre">engine_mode</span></code> and <code class="docutils literal notranslate"><span class="pre">max_workers</span></code>. The former allows for selecting
an execution model and the available options are <code class="docutils literal notranslate"><span class="pre">serial</span></code>,
<code class="docutils literal notranslate"><span class="pre">parallel</span></code> and <code class="docutils literal notranslate"><span class="pre">worker-based</span></code>. The <code class="docutils literal notranslate"><span class="pre">max_workers</span></code> option,
instead, allows for controlling the number of workers that will be
instantiated per executor instance.</p>
<p>The default value for the <code class="docutils literal notranslate"><span class="pre">engine_mode</span></code> is <code class="docutils literal notranslate"><span class="pre">parallel</span></code>, whereas
the default number of <code class="docutils literal notranslate"><span class="pre">max_workers</span></code> is <code class="docutils literal notranslate"><span class="pre">10</span></code>.</p>
</dd>
</dl>
</section>
<section id="configuring-glance-performance-profiling">
<h2>Configuring Glance performance profiling<a class="headerlink" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#configuring-glance-performance-profiling" title="Link to this heading">¶</a></h2>
<p>Glance supports using osprofiler to trace the performance of each key internal
handling, including RESTful API calling, DB operation and etc.</p>
<p><code class="docutils literal notranslate"><span class="pre">Please</span> <span class="pre">be</span> <span class="pre">aware</span> <span class="pre">that</span> <span class="pre">Glance</span> <span class="pre">performance</span> <span class="pre">profiling</span> <span class="pre">is</span> <span class="pre">currently</span> <span class="pre">a</span> <span class="pre">work</span> <span class="pre">in</span>
<span class="pre">progress</span> <span class="pre">feature.</span></code> Although, some trace points is available, e.g. API
execution profiling at wsgi main entry and SQL execution profiling at DB
module, the more fine-grained trace point is being worked on.</p>
<p>The config value <code class="docutils literal notranslate"><span class="pre">enabled</span></code> is used to determine whether fully enable
profiling feature for glance-api service.</p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">enabled=&lt;True|False&gt;</span></code></dt><dd><p>Optional. Default: <code class="docutils literal notranslate"><span class="pre">False</span></code></p>
<p>There is one more configuration option that needs to be defined to enable
Glance services profiling. The config value <code class="docutils literal notranslate"><span class="pre">hmac_keys</span></code> is used for
encrypting context data for performance profiling.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">hmac_keys=&lt;secret_key_string&gt;</span></code></dt><dd><p>Optional. Default: <code class="docutils literal notranslate"><span class="pre">SECRET_KEY</span></code></p>
<p><strong>IMPORTANT NOTE</strong>: in order to make profiling work as designed operator
needs to make those values of HMAC key be consistent for all services
in their deployment. Without HMAC key the profiling will not be triggered
even profiling feature is enabled.</p>
<p>The config value <code class="docutils literal notranslate"><span class="pre">trace_sqlalchemy</span></code> is used to determine whether fully
enable sqlalchemy engine based SQL execution profiling feature for glance-api
service.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">trace_sqlalchemy=&lt;True|False&gt;</span></code></dt><dd><p>Optional. Default: <code class="docutils literal notranslate"><span class="pre">False</span></code></p>
</dd>
</dl>
</section>
<section id="configuring-glance-public-endpoint">
<h2>Configuring Glance public endpoint<a class="headerlink" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#configuring-glance-public-endpoint" title="Link to this heading">¶</a></h2>
<p>This setting allows an operator to configure the endpoint URL that will
appear in the Glance “versions” response (that is, the response to
<code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/</span></code> ).  This can be necessary when the Glance API service is run
behind a proxy because the default endpoint displayed in the versions
response is that of the host actually running the API service.  If
Glance is being run behind a load balancer, for example, direct access
to individual hosts running the Glance API may not be allowed, hence the
load balancer URL would be used for this value.</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">public_endpoint=&lt;None|URL&gt;</span></code></dt><dd><p>Optional. Default: <code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</section>
<section id="configuring-http-keepalive-option">
<h2>Configuring http_keepalive option<a class="headerlink" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#configuring-http-keepalive-option" title="Link to this heading">¶</a></h2>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">http_keepalive=&lt;True|False&gt;</span></code></dt><dd><p>If False, server will return the header “Connection: close”, If True, server
will return “Connection: Keep-Alive” in its responses. In order to close the
client socket connection explicitly after the response is sent and read
successfully by the client, you simply have to set this option to False when
you create a wsgi server.</p>
</dd>
</dl>
</section>
<section id="configuring-the-health-check">
<h2>Configuring the Health Check<a class="headerlink" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#configuring-the-health-check" title="Link to this heading">¶</a></h2>
<p>This setting allows an operator to configure the endpoint URL that will
provide information to load balancer if given API endpoint at the node should
be available or not. Glance API server can be configured to expose a health
check URL.</p>
<p>To enable the health check middleware, it must occur in the beginning of the
application pipeline.</p>
<p>The health check middleware should be placed in your
<code class="docutils literal notranslate"><span class="pre">glance-api-paste.ini</span></code> in a section titled <code class="docutils literal notranslate"><span class="pre">[app:healthcheck]</span></code>.
It should look like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">app</span><span class="p">:</span><span class="n">healthcheck</span><span class="p">]</span>
<span class="n">paste</span><span class="o">.</span><span class="n">app_factory</span> <span class="o">=</span> <span class="n">oslo_middleware</span><span class="p">:</span><span class="n">Healthcheck</span><span class="o">.</span><span class="n">app_factory</span>
<span class="n">backends</span> <span class="o">=</span> <span class="n">disable_by_file</span>
<span class="n">disable_by_file_path</span> <span class="o">=</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">glance</span><span class="o">/</span><span class="n">healthcheck_disable</span>
</pre></div>
</div>
<p>A ready-made composite including this application is defined e.g. in
the <code class="docutils literal notranslate"><span class="pre">glance-api-paste.ini</span></code> file, looking like so:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">composite</span><span class="p">:</span><span class="n">glance</span><span class="o">-</span><span class="n">api</span><span class="p">]</span>
<span class="n">paste</span><span class="o">.</span><span class="n">composite_factory</span> <span class="o">=</span> <span class="n">glance</span><span class="o">.</span><span class="n">api</span><span class="p">:</span><span class="n">root_app_factory</span>
<span class="o">/</span><span class="p">:</span> <span class="n">apiv2app</span>
<span class="o">/</span><span class="n">healthcheck</span><span class="p">:</span> <span class="n">healthcheck</span>
</pre></div>
</div>
<p>For more information see
<a class="reference external" href="https://docs.openstack.org/oslo.middleware/latest/reference/api.html#oslo_middleware.Healthcheck">oslo.middleware</a>.</p>
</section>
<section id="configuring-supported-disk-formats">
<h2>Configuring supported disk formats<a class="headerlink" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#configuring-supported-disk-formats" title="Link to this heading">¶</a></h2>
<p>Each image in Glance has an associated disk format property.
When creating an image the user specifies a disk format. They must
select a format from the set that the Glance service supports. This
supported set can be seen by querying the <code class="docutils literal notranslate"><span class="pre">/v2/schemas/images</span></code> resource.
An operator can add or remove disk formats to the supported set.  This is
done by setting the <code class="docutils literal notranslate"><span class="pre">disk_formats</span></code> parameter which is found in the
<code class="docutils literal notranslate"><span class="pre">[image_format]</span></code> section of <code class="docutils literal notranslate"><span class="pre">glance-api.conf</span></code>.</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">disk_formats=&lt;Comma</span> <span class="pre">separated</span> <span class="pre">list</span> <span class="pre">of</span> <span class="pre">disk</span> <span class="pre">formats&gt;</span></code></dt><dd><p>Optional. Default: <code class="docutils literal notranslate"><span class="pre">ami,ari,aki,vhd,vhdx,vmdk,raw,qcow2,vdi,iso,ploop</span></code></p>
</dd>
</dl>
</section>
</section>


              </div>
            </div>
          </div>
          <div class="docs-actions">
          
            <a href="https://docs.openstack.org/glance/latest/configuration/index.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: Glance Configuration Options"></i></a>
          
          
            <a href="https://docs.openstack.org/glance/latest/configuration/glance_api.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: glance-api.conf"></i></a>
          
            <a id="logABugLink3" href="https://bugs.launchpad.net/glance/+filebug?field.title=Basic%20Configuration%20in%20glance&amp;field.tags=documentation&amp;field.comment=%0A%0A%0AThis%20bug%20tracker%20is%20for%20errors%20with%20the%20documentation,%20use%20the%20following%20as%20a%20template%20and%20remove%20or%20add%20fields%20as%20you%20see%20fit.%20Convert%20[%20]%20into%20[x]%20to%20check%20boxes:%0A%0A-%20[%20]%20This%20doc%20is%20inaccurate%20in%20this%20way:%20______%0A-%20[%20]%20This%20is%20a%20doc%20addition%20request.%0A-%20[%20]%20I%20have%20a%20fix%20to%20the%20document%20that%20I%20can%20paste%20below%20including%20example:%20input%20and%20output.%20%0A%0AIf%20you%20have%20a%20troubleshooting%20or%20support%20issue,%20use%20the%20following%20%20resources:%0A%0A%20-%20The%20mailing%20list:%20https://lists.openstack.org%0A%20-%20IRC:%20%27openstack%27%20channel%20on%20OFTC%0A%0A-----------------------------------%0ARelease:%2030.1.0.dev43%20on%202025-03-27%2012:35:35%0ASHA:%20d0d8e8f57955d08836400c83445552b0d61f50ad%0ASource:%20https://opendev.org/openstack/glance/src/doc/source/configuration/configuring.rst%0AURL:%20https://docs.openstack.org/glance/latest/configuration/configuring.html" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
          
          </div>
          <div class="row docs-byline bottom">
            <div class="docs-updated">this page last updated: 2025-03-27 12:35:35</div>
          </div>
          <div class="row">
            <div class="col-lg-8 col-md-8 col-sm-8 docs-license">
<a href="https://creativecommons.org/licenses/by/3.0/">
 <img src="./Basic Configuration — glance 30.1.0.dev43 documentation_files/license.png" alt="Creative Commons Attribution 3.0 License">
</a>
<p>
 Except where otherwise noted, this document is licensed under
 <a href="https://creativecommons.org/licenses/by/3.0/">Creative Commons
 Attribution 3.0 License</a>. See all <a href="https://www.openstack.org/legal">
 OpenStack Legal Documents</a>.
</p>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-4 docs-actions-wrapper">
            <!-- ID buglinkbottom added so that pre-filled doc bugs
                 are sent to Launchpad projects related to the
                 document -->
              <a href="https://bugs.launchpad.net/glance/+filebug?field.title=Basic%20Configuration%20in%20glance&amp;field.tags=documentation&amp;field.comment=%0A%0A%0AThis%20bug%20tracker%20is%20for%20errors%20with%20the%20documentation,%20use%20the%20following%20as%20a%20template%20and%20remove%20or%20add%20fields%20as%20you%20see%20fit.%20Convert%20[%20]%20into%20[x]%20to%20check%20boxes:%0A%0A-%20[%20]%20This%20doc%20is%20inaccurate%20in%20this%20way:%20______%0A-%20[%20]%20This%20is%20a%20doc%20addition%20request.%0A-%20[%20]%20I%20have%20a%20fix%20to%20the%20document%20that%20I%20can%20paste%20below%20including%20example:%20input%20and%20output.%20%0A%0AIf%20you%20have%20a%20troubleshooting%20or%20support%20issue,%20use%20the%20following%20%20resources:%0A%0A%20-%20The%20mailing%20list:%20https://lists.openstack.org%0A%20-%20IRC:%20%27openstack%27%20channel%20on%20OFTC%0A%0A-----------------------------------%0ARelease:%2030.1.0.dev43%20on%202025-03-27%2012:35:35%0ASHA:%20d0d8e8f57955d08836400c83445552b0d61f50ad%0ASource:%20https://opendev.org/openstack/glance/src/doc/source/configuration/configuring.rst%0AURL:%20https://docs.openstack.org/glance/latest/configuration/configuring.html" id="logABugLink2" class="docs-footer-actions"><i class="fa fa-bug"></i> found an error? report a bug</a>
            </div>
          </div>
        </div>
<div class="col-lg-3 col-md-4 col-sm-4 col-lg-pull-9 col-md-pull-8 col-sm-pull-8 order-1 docs-sidebar">
  <div class="btn-group docs-sidebar-releases">
    <button onclick="location.href=&#39;/&#39;" class="btn docs-sidebar-home" data-toggle="tooltip" data-placement="top" title="OpenStack Docs Home"><i class="fa fa-arrow-circle-o-left"></i></button>
<button type="button" data-bs-toggle="dropdown" class="btn dropdown-toggle docs-sidebar-release-select">OpenStack Documentation</button>
<ul class="dropdown-menu docs-sidebar-dropdown" role="menu">
  <li class="dropdown-header">Guides</li>
  <li><a class="dropdown-item" href="https://docs.openstack.org/index.html#install-guides">Install Guides</a></li>
  <li><a class="dropdown-item" href="https://docs.openstack.org/index.html#user-guides">User Guides</a></li>
  <li><a class="dropdown-item" href="https://docs.openstack.org/index.html#configuration-guides">Configuration Guides</a></li>
  <li><a class="dropdown-item" href="https://docs.openstack.org/index.html#ops-and-admin-guides">Operations and Administration Guides</a></li>
  <li><a class="dropdown-item" href="https://docs.openstack.org/index.html#api-guides">API Guides</a></li>
  <li><a class="dropdown-item" href="https://docs.openstack.org/index.html#contributor-guides">Contributor Guides</a></li>
  <li class="dropdown-header">Languages</li>
  <li><a class="dropdown-item" href="https://docs.openstack.org/de/">Deutsch (German)</a></li>
  <li><a class="dropdown-item" href="https://docs.openstack.org/fr/">Français (French)</a></li>
  <li><a class="dropdown-item" href="https://docs.openstack.org/id/">Bahasa Indonesia (Indonesian)</a></li>
  <li><a class="dropdown-item" href="https://docs.openstack.org/it/">Italiano (Italian)</a></li>
  <li><a class="dropdown-item" href="https://docs.openstack.org/ja/">日本語 (Japanese)</a></li>
  <li><a class="dropdown-item" href="https://docs.openstack.org/ko_KR/">한국어 (Korean)</a></li>
  <li><a class="dropdown-item" href="https://docs.openstack.org/pt_BR/">Português (Portuguese)</a></li>
  <li><a class="dropdown-item" href="https://docs.openstack.org/tr_TR/">Türkçe (Türkiye)</a></li>
  <li><a class="dropdown-item" href="https://docs.openstack.org/zh_CN/">简体中文 (Simplified Chinese)</a></li>
</ul>
  </div>
  <div class="docs-sidebar-toc">
    <div class="docs-sidebar-section" id="table-of-contents">
      <a href="https://docs.openstack.org/glance/latest/index.html" class="docs-sidebar-section-title"><h4>glance 30.1.0.dev43</h4></a>
      
    </div>

  <div class="docs-sidebar-toc">
    <div class="docs-sidebar-section" id="local-table-of-contents">
      <h4 class="docs-sidebar-section-title">Page Contents</h4>
      <ul>
<li><a class="reference internal" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#">Basic Configuration</a><ul>
<li><a class="reference internal" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#common-configuration-options-in-glance">Common Configuration Options in Glance</a></li>
<li><a class="reference internal" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#configuring-server-startup-options">Configuring Server Startup Options</a></li>
<li><a class="reference internal" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#configuring-logging-in-glance">Configuring Logging in Glance</a><ul>
<li><a class="reference internal" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#logging-options-available-only-in-configuration-files">Logging Options Available Only in Configuration Files</a></li>
</ul>
</li>
<li><a class="reference internal" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#configuring-glance-storage-backends">Configuring Glance Storage Backends</a><ul>
<li><a class="reference internal" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#configuring-the-filesystem-storage-backend">Configuring the Filesystem Storage Backend</a></li>
<li><a class="reference internal" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#configuring-the-filesystem-storage-backend-with-multiple-stores">Configuring the Filesystem Storage Backend with multiple stores</a></li>
<li><a class="reference internal" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#configuring-the-swift-storage-backend">Configuring the Swift Storage Backend</a><ul>
<li><a class="reference internal" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#configuring-multiple-swift-accounts-stores">Configuring Multiple Swift Accounts/Stores</a></li>
<li><a class="reference internal" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#configuring-swift-configuration-file">Configuring Swift configuration file</a></li>
</ul>
</li>
<li><a class="reference internal" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#configuring-the-rbd-storage-backend">Configuring the RBD Storage Backend</a></li>
<li><a class="reference internal" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#configuring-the-cinder-storage-backend">Configuring the Cinder Storage Backend</a></li>
</ul>
</li>
<li><a class="reference internal" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#configuring-multi-attach-volume-type">Configuring multi-attach volume type</a><ul>
<li><a class="reference internal" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#configuring-multiple-cinder-storage-backend">Configuring multiple Cinder Storage Backend</a></li>
<li><a class="reference internal" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#configuring-the-vmware-storage-backend">Configuring the VMware Storage Backend</a></li>
<li><a class="reference internal" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#configuring-the-s3-storage-backend">Configuring the S3 Storage Backend</a></li>
<li><a class="reference internal" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#configuring-the-storage-endpoint">Configuring the Storage Endpoint</a></li>
</ul>
</li>
<li><a class="reference internal" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#configuring-glance-image-size-limit">Configuring Glance Image Size Limit</a></li>
<li><a class="reference internal" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#configuring-glance-user-storage-quota">Configuring Glance User Storage Quota</a></li>
<li><a class="reference internal" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#configuring-glance-per-tenant-quotas">Configuring Glance Per-Tenant Quotas</a></li>
<li><a class="reference internal" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#configuring-the-image-cache">Configuring the Image Cache</a><ul>
<li><a class="reference internal" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#enabling-the-image-cache-middleware">Enabling the Image Cache Middleware</a></li>
<li><a class="reference internal" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#enabling-the-image-cache-management-middleware-deprecated">Enabling the Image Cache Management Middleware (DEPRECATED)</a></li>
<li><a class="reference internal" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#configuration-options-affecting-the-image-cache">Configuration Options Affecting the Image Cache</a></li>
</ul>
</li>
<li><a class="reference internal" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#migrating-records-from-sqlite-to-central-database">Migrating records from SQLite to Central database</a></li>
<li><a class="reference internal" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#configuring-notifications">Configuring Notifications</a></li>
<li><a class="reference internal" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#configuring-glance-property-protections">Configuring Glance Property Protections</a></li>
<li><a class="reference internal" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#configuring-glance-apis">Configuring Glance APIs</a></li>
<li><a class="reference internal" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#configuring-glance-tasks">Configuring Glance Tasks</a></li>
<li><a class="reference internal" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#configuring-glance-performance-profiling">Configuring Glance performance profiling</a></li>
<li><a class="reference internal" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#configuring-glance-public-endpoint">Configuring Glance public endpoint</a></li>
<li><a class="reference internal" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#configuring-http-keepalive-option">Configuring http_keepalive option</a></li>
<li><a class="reference internal" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#configuring-the-health-check">Configuring the Health Check</a></li>
<li><a class="reference internal" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#configuring-supported-disk-formats">Configuring supported disk formats</a></li>
</ul>
</li>
</ul>

    </div>
  </div>
  </div>
</div>
      </div>
    </div>
<footer>
  <div class="container">
    <div class="row footer-links">
      <div class="col-lg-2 col-sm-2">
        <h3>OpenStack</h3>
        <ul>
          <li><a href="https://www.openstack.org/software/project-navigator/">Projects</a></li>
          <li><a href="https://security.openstack.org/">OpenStack Security</a></li>
          <li><a href="https://openstack.org/blog/">Blog</a></li>
          <li><a href="https://openstack.org/news/">News</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Community</h3>
        <ul>
          <li><a href="https://www.meetup.com/pro/openinfradev/">User Groups</a></li>
          <li><a href="https://openstack.org/community/events/">Events</a></li>
          <li><a href="https://openstack.org/community/jobs/">Jobs</a></li>
          <li><a href="https://openinfra.dev/members/">Companies</a></li>
          <li><a href="https://docs.openstack.org/contributors">Contribute</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Documentation</h3>
        <ul>
          <li><a href="https://docs.openstack.org/">OpenStack Manuals</a></li>
          <li><a href="https://openstack.org/software/start/">Getting Started</a></li>
          <li><a href="https://developer.openstack.org/">API Documentation</a></li>
          <li><a href="https://wiki.openstack.org/">Wiki</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Branding &amp; Legal</h3>
        <ul>
          <li><a href="https://openinfra.dev/legal">Legal Docs</a></li>
          <li><a href="https://openstack.org/brand/">Logos &amp; Guidelines</a></li>
          <li><a href="https://openinfra.dev/legal/trademark-policy">Trademark Policy</a></li>
          <li><a href="https://openinfra.dev/privacy-policy">Privacy Policy</a></li>
          <li><a href="https://docs.openstack.org/contributors/common/setup-gerrit.html#individual-contributor-license-agreement">OpenInfra CLA</a></li>
        </ul>
      </div>
      <div class="col-lg-4 col-sm-4">
        <h3>Stay In Touch</h3>
        <a href="https://twitter.com/OpenStack" target="_blank" class="social-icons footer-twitter"></a>
        <a href="https://www.facebook.com/openinfradev" target="_blank" class="social-icons footer-facebook"></a>
        <a href="https://www.linkedin.com/company/open-infrastructure-foundation" target="_blank" class="social-icons footer-linkedin"></a>
        <a href="https://www.youtube.com/user/OpenStackFoundation" target="_blank" class="social-icons footer-youtube"></a>
        <p class="fine-print">
          The OpenStack project is provided under the
          <a href="https://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 license</a>. Docs.openstack.org is powered by
          <a href="https://rackspace.com/" target="_blank">Rackspace Cloud Computing</a>.
        </p>
      </div>
    </div>
  </div>
</footer>
<!-- jQuery -->
<script src="./Basic Configuration — glance 30.1.0.dev43 documentation_files/jquery-3.2.1.min.js.下载"></script>

<!-- Bootstrap JavaScript -->
<script src="./Basic Configuration — glance 30.1.0.dev43 documentation_files/bootstrap.bundle.min.js.下载"></script>

<!-- The rest of the JS -->
<script src="./Basic Configuration — glance 30.1.0.dev43 documentation_files/navigation.js.下载"></script>

<!-- Docs JS -->
<script src="./Basic Configuration — glance 30.1.0.dev43 documentation_files/docs.js.下载"></script>

<!-- Javascript for page -->
<script>
  /* Build a description of this page including SHA, source location on git
   * repo, build time and the project's launchpad bug tag. Set the HREF of the
   * bug buttons
   */
    var lineFeed = "%0A";
    var gitURL = "Source: Can't derive source file URL";

    /* there have been cases where "pagename" wasn't set; better check for it */
    /* "giturl" is the URL of the source file on Git and is auto-generated by
     * openstackdocstheme.
     *
     * "pagename" is a standard sphinx parameter containing the name of
     * the source file, without extension.
     */

    var sourceFile = "configuration/configuring" + ".rst";
    gitURL = "Source: https://opendev.org/openstack/glance/src/doc/source" + "/" + sourceFile;

    /* gitsha, project and bug_tag rely on variables in conf.py */
    var gitSha = "SHA: d0d8e8f57955d08836400c83445552b0d61f50ad";
    var repositoryName = "openstack/glance";
    var bugProject = "glance";
    var bugTitle = "Basic Configuration in glance";
    var fieldTags = "documentation";
    var useStoryboard = "";

    /* "last_updated" is the build date and time. It relies on the
       conf.py variable "html_last_updated_fmt", which should include
       year/month/day as well as hours and minutes                   */
    var buildstring = "Release: 30.1.0.dev43 on 2025-03-27 12:35:35";

    var fieldComment = encodeURI(buildstring) +
                       lineFeed + encodeURI(gitSha) +
                       lineFeed + encodeURI(gitURL) ;

    logABug(bugTitle, bugProject, fieldComment, fieldTags, repositoryName, useStoryboard);
</script>


<script>
    $(document).ready(function(){

          $.ajax({
            context: this,
            dataType : "html",
            url : "https://docs.openstack.org/latest/badge.html",
            success : function(results) {
                $('#deprecated-badge-container').html(results);
            }
        });
    });
</script>
<div id="deprecated-badge-container"><!-- Custom CSS -->

 
  <link href="./Basic Configuration — glance 30.1.0.dev43 documentation_files/deprecated-badge.css" rel="stylesheet">
  <script src="./Basic Configuration — glance 30.1.0.dev43 documentation_files/deprecated-badge.js.下载">
  </script>
 
 
  <div class="deprecated-badge fixed deprecated-badge-development" id="deprecated-badge">
   <span class="deprecated-badge-close-button" id="deprecated-badge-close-button" title="close">
    x
   </span>
   <div class="container">
    <p class="deprecated-badge-left">
     This release is under development. The current supported release is
     <a href="https://docs.openstack.org/2025.1/">
      2025.1.
     </a>
    </p>
    <a class="deprecated-badge-right" href="https://docs.openstack.org/glance/latest/configuration/configuring.html#top">
     <i aria-hidden="true" class="fa fa-chevron-up">
     </i>
     Back to Top
    </a>
   </div>
  </div>
 

</div>

  
</body></html>